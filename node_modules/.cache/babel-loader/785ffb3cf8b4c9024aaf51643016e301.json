{"ast":null,"code":"import { Component, createElement, Fragment, createContext } from 'react';\nimport * as firebase from 'firebase/app';\nimport { renderAndAddProps } from 'render-and-add-props';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nvar FirebaseDatabaseContextConsumerLifeCycle = function (_super) {\n  __extends(FirebaseDatabaseContextConsumerLifeCycle, _super);\n\n  function FirebaseDatabaseContextConsumerLifeCycle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.listenToNodeIfNotInContext = function () {\n    var _a = this.props,\n        dataTree = _a.dataTree,\n        path = _a.path,\n        listenTo = _a.listenTo;\n\n    if (path in dataTree) {\n      return;\n    }\n\n    listenTo(this.props);\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.stopListeningToNode = function () {\n    var _a = this.props,\n        stopListeningTo = _a.stopListeningTo,\n        path = _a.path;\n    stopListeningTo(path);\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidMount = function () {\n    this.listenToNodeIfNotInContext();\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidUpdate = function () {\n    this.listenToNodeIfNotInContext();\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentWillUnmount = function () {\n    this.stopListeningToNode();\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.render = function () {\n    return null;\n  };\n\n  return FirebaseDatabaseContextConsumerLifeCycle;\n}(Component);\n\nrequire('@firebase/database');\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar _a;\n\nvar firebaseDatabaseDefaultContext = {\n  listenTo: function (_a) {},\n  stopListeningTo: function (path) {},\n  dataTree: {},\n  firebase: firebase\n};\nvar FirebaseDatabaseContextProvider = (_a = createContext(firebaseDatabaseDefaultContext), _a.Provider),\n    FirebaseDatabaseContextConsumer = _a.Consumer;\n\nvar initializeFirebaseApp = function (_a) {\n  var firebase$$1 = _a.firebase,\n      authDomain = _a.authDomain,\n      databaseURL = _a.databaseURL,\n      projectId = _a.projectId,\n      storageBucket = _a.storageBucket,\n      messagingSenderId = _a.messagingSenderId,\n      apiKey = _a.apiKey;\n\n  try {\n    firebase$$1.initializeApp({\n      apiKey: apiKey,\n      authDomain: authDomain,\n      databaseURL: databaseURL,\n      projectId: projectId,\n      storageBucket: storageBucket,\n      messagingSenderId: messagingSenderId\n    });\n  } catch (err) {\n    if (err.code !== \"app/duplicate-app\") {\n      throw err;\n    }\n  }\n};\n\nvar getFirebaseQuery = function (_a) {\n  var _b = _a.firebase,\n      firebase$$1 = _b === void 0 ? null : _b,\n      path = _a.path,\n      _c = _a.orderByChild,\n      orderByChild = _c === void 0 ? null : _c,\n      _d = _a.orderByKey,\n      orderByKey = _d === void 0 ? null : _d,\n      _e = _a.orderByValue,\n      orderByValue = _e === void 0 ? null : _e,\n      _f = _a.limitToFirst,\n      limitToFirst = _f === void 0 ? null : _f,\n      _g = _a.limitToLast,\n      limitToLast = _g === void 0 ? null : _g,\n      _h = _a.startAt,\n      startAt = _h === void 0 ? null : _h,\n      _j = _a.endAt,\n      endAt = _j === void 0 ? null : _j,\n      _k = _a.equalTo,\n      equalTo = _k === void 0 ? null : _k;\n\n  if (firebase$$1 === null) {\n    throw new Error(\"Need to supply firebase argument to getFirebaseQuery\");\n  }\n\n  if (path === null || typeof path === \"undefined\") {\n    throw new Error(\"Need to supply path argument to getFirebaseQuery\");\n  }\n\n  var result = firebase$$1.database().ref(path);\n\n  if (orderByChild !== null) {\n    result = result.orderByChild(orderByChild);\n  }\n\n  if (orderByKey !== null) {\n    result = result.orderByKey();\n  }\n\n  if (orderByValue !== null) {\n    result = result.orderByValue();\n  }\n\n  if (limitToFirst !== null) {\n    result = result.limitToFirst(limitToFirst);\n  }\n\n  if (limitToLast !== null) {\n    result = result.limitToLast(limitToLast);\n  }\n\n  if (startAt !== null) {\n    result = result.startAt(startAt);\n  }\n\n  if (endAt !== null) {\n    result = result.endAt(endAt);\n  }\n\n  if (equalTo !== null) {\n    result = result.equalTo(equalTo);\n  }\n\n  return result;\n};\n\nvar actions = {\n  addPathToData: function (state, _a) {\n    var path = _a.path,\n        newData = _a.data,\n        unsub = _a.unsub,\n        isLoading = _a.isLoading;\n\n    var _b;\n\n    var data = Object.assign({}, state.dataTree, (_b = {}, _b[path] = {\n      value: newData,\n      unsub: unsub,\n      isLoading: isLoading\n    }, _b));\n    var newState = Object.assign({}, state, {\n      dataTree: data\n    });\n    return newState;\n  }\n};\n\nvar FirebaseDatabaseProvider = function (_super) {\n  __extends(FirebaseDatabaseProvider, _super);\n\n  function FirebaseDatabaseProvider(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.listenTo = function (firebaseQuery) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var path, ref, unsub;\n\n        var _this = this;\n\n        return __generator(this, function (_a) {\n          path = firebaseQuery.path;\n\n          if (path in this.state.dataTree) {\n            return [2];\n          }\n\n          ref = getFirebaseQuery(Object.assign({}, firebaseQuery, {\n            firebase: this.state.firebase\n          }));\n          this.setState(function (state) {\n            return actions.addPathToData(state, {\n              path: path,\n              data: null,\n              unsub: function () {},\n              isLoading: true\n            });\n          });\n          unsub = ref.on(\"value\", function (d) {\n            if (d === null || typeof d === \"undefined\") return;\n\n            _this.setState(function (state) {\n              return actions.addPathToData(state, {\n                path: path,\n                data: d.val(),\n                unsub: unsub,\n                isLoading: false\n              });\n            });\n          });\n          return [2];\n        });\n      });\n    };\n\n    _this.state = {\n      firebase: props.firebase,\n      dataTree: {},\n      listenTo: _this.listenTo.bind(_this),\n      stopListeningTo: _this.stopListeningTo.bind(_this)\n    };\n    initializeFirebaseApp(_this.props);\n    return _this;\n  }\n\n  FirebaseDatabaseProvider.prototype.stopListeningTo = function (path) {\n    if (!(path in this.state.dataTree)) {\n      return;\n    }\n\n    this.state.dataTree[path].unsub();\n  };\n\n  FirebaseDatabaseProvider.prototype.componentWillUnmount = function () {\n    var dataTree = this.state.dataTree;\n    Object.keys(dataTree).forEach(function (key) {\n      return dataTree[key].unsub && dataTree[key].unsub();\n    });\n  };\n\n  FirebaseDatabaseProvider.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(FirebaseDatabaseContextProvider, {\n      value: this.state\n    }, renderAndAddProps(children, {}));\n  };\n\n  return FirebaseDatabaseProvider;\n}(Component);\n\nvar FirebaseDatabaseContextConsumerLifeCycle$1 = function (_super) {\n  __extends(FirebaseDatabaseContextConsumerLifeCycle, _super);\n\n  function FirebaseDatabaseContextConsumerLifeCycle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.listenToNodeIfNotInContext = function () {\n    var _a = this.props,\n        dataTree = _a.dataTree,\n        path = _a.path,\n        listenTo = _a.listenTo;\n\n    if (path in dataTree) {\n      return;\n    }\n\n    listenTo(this.props);\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.stopListeningToNode = function () {\n    var _a = this.props,\n        stopListeningTo = _a.stopListeningTo,\n        path = _a.path;\n    stopListeningTo(path);\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidMount = function () {\n    this.listenToNodeIfNotInContext();\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidUpdate = function () {\n    this.listenToNodeIfNotInContext();\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentWillUnmount = function () {\n    this.stopListeningToNode();\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.render = function () {\n    return null;\n  };\n\n  return FirebaseDatabaseContextConsumerLifeCycle;\n}(Component);\n\nvar FirebaseDatabaseNode = function (_super) {\n  __extends(FirebaseDatabaseNode, _super);\n\n  function FirebaseDatabaseNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FirebaseDatabaseNode.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        children = _a.children,\n        path = _a.path;\n    return createElement(FirebaseDatabaseContextConsumer, null, function (context) {\n      return createElement(Fragment, null, createElement(FirebaseDatabaseContextConsumerLifeCycle$1, __assign({}, context, {\n        path: path\n      }, _this.props)), renderAndAddProps(children, __assign({\n        path: path\n      }, context.dataTree[path])));\n    });\n  };\n\n  return FirebaseDatabaseNode;\n}(Component);\n\nvar FirebaseDatabaseMutationWithContext = function (_super) {\n  __extends(FirebaseDatabaseMutationWithContext, _super);\n\n  function FirebaseDatabaseMutationWithContext() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.createMutationRunner = function () {\n      var _a = _this.props,\n          firebase$$1 = _a.firebase,\n          path = _a.path,\n          type = _a.type;\n      var firebaseRef = firebase$$1.app().database().ref(path);\n      var runMutation;\n\n      switch (type) {\n        case \"push\":\n          {\n            runMutation = function (value) {\n              return __awaiter(_this, void 0, void 0, function () {\n                var key;\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      return [4, firebaseRef.push(value).key];\n\n                    case 1:\n                      key = _a.sent();\n                      return [2, {\n                        path: path,\n                        value: value,\n                        type: type,\n                        key: key\n                      }];\n                  }\n                });\n              });\n            };\n\n            break;\n          }\n\n        case \"update\":\n          {\n            runMutation = function (value) {\n              return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      return [4, firebaseRef.update(value)];\n\n                    case 1:\n                      _a.sent();\n\n                      return [2, {\n                        path: path,\n                        value: value,\n                        type: type,\n                        key: null\n                      }];\n                  }\n                });\n              });\n            };\n\n            break;\n          }\n\n        case \"set\":\n          {\n            runMutation = function (value) {\n              return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      return [4, firebaseRef.set(value)];\n\n                    case 1:\n                      _a.sent();\n\n                      return [2, {\n                        path: path,\n                        value: value,\n                        type: type,\n                        key: null\n                      }];\n                  }\n                });\n              });\n            };\n\n            break;\n          }\n\n        default:\n          {\n            throw new Error(\"Unsupported mutation type \" + type + \". \\nPlease file an issue if you'd like to see us support it !\");\n          }\n      }\n\n      return runMutation;\n    };\n\n    return _this;\n  }\n\n  FirebaseDatabaseMutationWithContext.prototype.shouldComponentUpdate = function (nextProps) {\n    return nextProps.path !== this.props.path || nextProps.firebase !== this.props.firebase;\n  };\n\n  FirebaseDatabaseMutationWithContext.prototype.render = function () {\n    var children = this.props.children;\n    var runMutation = this.createMutationRunner();\n    return renderAndAddProps(children, __assign({\n      runMutation: runMutation\n    }, this.props));\n  };\n\n  return FirebaseDatabaseMutationWithContext;\n}(Component);\n\nvar FirebaseDatabaseMutation = function (_super) {\n  __extends(FirebaseDatabaseMutation, _super);\n\n  function FirebaseDatabaseMutation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FirebaseDatabaseMutation.prototype.render = function () {\n    var _a = this.props,\n        children = _a.children,\n        type = _a.type,\n        path = _a.path;\n    return createElement(FirebaseDatabaseContextConsumer, null, function (context) {\n      return createElement(FirebaseDatabaseMutationWithContext, __assign({\n        type: type,\n        path: path\n      }, context, {\n        children: children\n      }));\n    });\n  };\n\n  return FirebaseDatabaseMutation;\n}(Component);\n\nvar FirebaseDatabaseTransactionWithContext = function (_super) {\n  __extends(FirebaseDatabaseTransactionWithContext, _super);\n\n  function FirebaseDatabaseTransactionWithContext() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.createTransactionRunner = function () {\n      var _a = _this.props,\n          firebase$$1 = _a.firebase,\n          path = _a.path;\n      var firebaseRef = firebase$$1.app().database().ref(path);\n\n      var runTransaction = function (_a) {\n        var reducer = _a.reducer;\n        return __awaiter(_this, void 0, void 0, function () {\n          return __generator(this, function (_b) {\n            switch (_b.label) {\n              case 0:\n                return [4, firebaseRef.transaction(reducer)];\n\n              case 1:\n                _b.sent();\n\n                return [2, {\n                  path: path\n                }];\n            }\n          });\n        });\n      };\n\n      return runTransaction;\n    };\n\n    return _this;\n  }\n\n  FirebaseDatabaseTransactionWithContext.prototype.shouldComponentUpdate = function (nextProps) {\n    return nextProps.path !== this.props.path || nextProps.firebase !== this.props.firebase;\n  };\n\n  FirebaseDatabaseTransactionWithContext.prototype.render = function () {\n    var children = this.props.children;\n    var runTransaction = this.createTransactionRunner();\n    return renderAndAddProps(children, __assign({\n      runTransaction: runTransaction\n    }, this.props));\n  };\n\n  return FirebaseDatabaseTransactionWithContext;\n}(Component);\n\nvar FirebaseDatabaseTransaction = function (_super) {\n  __extends(FirebaseDatabaseTransaction, _super);\n\n  function FirebaseDatabaseTransaction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FirebaseDatabaseTransaction.prototype.render = function () {\n    var _a = this.props,\n        children = _a.children,\n        path = _a.path;\n    return createElement(FirebaseDatabaseContextConsumer, null, function (context) {\n      return createElement(FirebaseDatabaseTransactionWithContext, __assign({\n        path: path\n      }, context, {\n        children: children\n      }));\n    });\n  };\n\n  return FirebaseDatabaseTransaction;\n}(Component);\n\nexport { FirebaseDatabaseContextConsumerLifeCycle, FirebaseDatabaseNode, FirebaseDatabaseProvider, FirebaseDatabaseMutation, FirebaseDatabaseTransaction };","map":{"version":3,"sources":["/Users/kzjouf/Desktop/project/scdapp/node_modules/@react-firebase/database/dist/index.esm.js"],"names":["Component","createElement","Fragment","createContext","firebase","renderAndAddProps","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","FirebaseDatabaseContextConsumerLifeCycle","_super","listenToNodeIfNotInContext","_a","props","dataTree","path","listenTo","stopListeningToNode","stopListeningTo","componentDidMount","componentDidUpdate","componentWillUnmount","render","require","firebaseDatabaseDefaultContext","FirebaseDatabaseContextProvider","Provider","FirebaseDatabaseContextConsumer","Consumer","initializeFirebaseApp","firebase$$1","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","apiKey","initializeApp","err","code","getFirebaseQuery","_b","_c","orderByChild","_d","orderByKey","_e","orderByValue","_f","limitToFirst","_g","limitToLast","_h","startAt","_j","endAt","_k","equalTo","Error","database","ref","actions","addPathToData","state","newData","data","unsub","isLoading","newState","FirebaseDatabaseProvider","_this","firebaseQuery","setState","on","val","bind","keys","forEach","key","children","FirebaseDatabaseContextConsumerLifeCycle$1","FirebaseDatabaseNode","context","FirebaseDatabaseMutationWithContext","createMutationRunner","type","firebaseRef","app","runMutation","update","set","shouldComponentUpdate","nextProps","FirebaseDatabaseMutation","FirebaseDatabaseTransactionWithContext","createTransactionRunner","runTransaction","reducer","transaction","FirebaseDatabaseTransaction"],"mappings":"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","sourcesContent":["import { Component, createElement, Fragment, createContext } from 'react';\nimport * as firebase from 'firebase/app';\nimport { renderAndAddProps } from 'render-and-add-props';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar FirebaseDatabaseContextConsumerLifeCycle = (function (_super) {\r\n    __extends(FirebaseDatabaseContextConsumerLifeCycle, _super);\r\n    function FirebaseDatabaseContextConsumerLifeCycle() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.listenToNodeIfNotInContext = function () {\r\n        var _a = this.props, dataTree = _a.dataTree, path = _a.path, listenTo = _a.listenTo;\r\n        if (path in dataTree) {\r\n            return;\r\n        }\r\n        listenTo(this.props);\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.stopListeningToNode = function () {\r\n        var _a = this.props, stopListeningTo = _a.stopListeningTo, path = _a.path;\r\n        stopListeningTo(path);\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidMount = function () {\r\n        this.listenToNodeIfNotInContext();\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidUpdate = function () {\r\n        this.listenToNodeIfNotInContext();\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentWillUnmount = function () {\r\n        this.stopListeningToNode();\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.render = function () {\r\n        return null;\r\n    };\r\n    return FirebaseDatabaseContextConsumerLifeCycle;\r\n}(Component));\n\nrequire('@firebase/database');\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar _a;\r\nvar firebaseDatabaseDefaultContext = {\r\n    listenTo: function (_a) { },\r\n    stopListeningTo: function (path) { },\r\n    dataTree: {},\r\n    firebase: firebase\r\n};\r\nvar FirebaseDatabaseContextProvider = (_a = createContext(firebaseDatabaseDefaultContext), _a.Provider), FirebaseDatabaseContextConsumer = _a.Consumer;\n\nvar initializeFirebaseApp = function (_a) {\r\n    var firebase$$1 = _a.firebase, authDomain = _a.authDomain, databaseURL = _a.databaseURL, projectId = _a.projectId, storageBucket = _a.storageBucket, messagingSenderId = _a.messagingSenderId, apiKey = _a.apiKey;\r\n    try {\r\n        firebase$$1.initializeApp({\r\n            apiKey: apiKey,\r\n            authDomain: authDomain,\r\n            databaseURL: databaseURL,\r\n            projectId: projectId,\r\n            storageBucket: storageBucket,\r\n            messagingSenderId: messagingSenderId\r\n        });\r\n    }\r\n    catch (err) {\r\n        if (err.code !== \"app/duplicate-app\") {\r\n            throw err;\r\n        }\r\n    }\r\n};\n\nvar getFirebaseQuery = function (_a) {\r\n    var _b = _a.firebase, firebase$$1 = _b === void 0 ? null : _b, path = _a.path, _c = _a.orderByChild, orderByChild = _c === void 0 ? null : _c, _d = _a.orderByKey, orderByKey = _d === void 0 ? null : _d, _e = _a.orderByValue, orderByValue = _e === void 0 ? null : _e, _f = _a.limitToFirst, limitToFirst = _f === void 0 ? null : _f, _g = _a.limitToLast, limitToLast = _g === void 0 ? null : _g, _h = _a.startAt, startAt = _h === void 0 ? null : _h, _j = _a.endAt, endAt = _j === void 0 ? null : _j, _k = _a.equalTo, equalTo = _k === void 0 ? null : _k;\r\n    if (firebase$$1 === null) {\r\n        throw new Error(\"Need to supply firebase argument to getFirebaseQuery\");\r\n    }\r\n    if (path === null || typeof path === \"undefined\") {\r\n        throw new Error(\"Need to supply path argument to getFirebaseQuery\");\r\n    }\r\n    var result = firebase$$1.database().ref(path);\r\n    if (orderByChild !== null) {\r\n        result = result.orderByChild(orderByChild);\r\n    }\r\n    if (orderByKey !== null) {\r\n        result = result.orderByKey();\r\n    }\r\n    if (orderByValue !== null) {\r\n        result = result.orderByValue();\r\n    }\r\n    if (limitToFirst !== null) {\r\n        result = result.limitToFirst(limitToFirst);\r\n    }\r\n    if (limitToLast !== null) {\r\n        result = result.limitToLast(limitToLast);\r\n    }\r\n    if (startAt !== null) {\r\n        result = result.startAt(startAt);\r\n    }\r\n    if (endAt !== null) {\r\n        result = result.endAt(endAt);\r\n    }\r\n    if (equalTo !== null) {\r\n        result = result.equalTo(equalTo);\r\n    }\r\n    return result;\r\n};\n\nvar actions = {\r\n    addPathToData: function (state, _a) {\r\n        var path = _a.path, newData = _a.data, unsub = _a.unsub, isLoading = _a.isLoading;\r\n        var _b;\r\n        var data = Object.assign({}, state.dataTree, (_b = {},\r\n            _b[path] = { value: newData, unsub: unsub, isLoading: isLoading },\r\n            _b));\r\n        var newState = Object.assign({}, state, { dataTree: data });\r\n        return newState;\r\n    }\r\n};\n\nvar FirebaseDatabaseProvider = (function (_super) {\r\n    __extends(FirebaseDatabaseProvider, _super);\r\n    function FirebaseDatabaseProvider(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.listenTo = function (firebaseQuery) { return __awaiter(_this, void 0, void 0, function () {\r\n            var path, ref, unsub;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                path = firebaseQuery.path;\r\n                if (path in this.state.dataTree) {\r\n                    return [2];\r\n                }\r\n                ref = getFirebaseQuery(Object.assign({}, firebaseQuery, { firebase: this.state.firebase }));\r\n                this.setState(function (state) {\r\n                    return actions.addPathToData(state, {\r\n                        path: path,\r\n                        data: null,\r\n                        unsub: function () { },\r\n                        isLoading: true\r\n                    });\r\n                });\r\n                unsub = ref.on(\"value\", function (d) {\r\n                    if (d === null || typeof d === \"undefined\")\r\n                        return;\r\n                    _this.setState(function (state) {\r\n                        return actions.addPathToData(state, {\r\n                            path: path,\r\n                            data: d.val(),\r\n                            unsub: unsub,\r\n                            isLoading: false\r\n                        });\r\n                    });\r\n                });\r\n                return [2];\r\n            });\r\n        }); };\r\n        _this.state = {\r\n            firebase: props.firebase,\r\n            dataTree: {},\r\n            listenTo: _this.listenTo.bind(_this),\r\n            stopListeningTo: _this.stopListeningTo.bind(_this)\r\n        };\r\n        initializeFirebaseApp(_this.props);\r\n        return _this;\r\n    }\r\n    FirebaseDatabaseProvider.prototype.stopListeningTo = function (path) {\r\n        if (!(path in this.state.dataTree)) {\r\n            return;\r\n        }\r\n        this.state.dataTree[path].unsub();\r\n    };\r\n    FirebaseDatabaseProvider.prototype.componentWillUnmount = function () {\r\n        var dataTree = this.state.dataTree;\r\n        Object.keys(dataTree).forEach(function (key) { return dataTree[key].unsub && dataTree[key].unsub(); });\r\n    };\r\n    FirebaseDatabaseProvider.prototype.render = function () {\r\n        var children = this.props.children;\r\n        return (createElement(FirebaseDatabaseContextProvider, { value: this.state }, renderAndAddProps(children, {})));\r\n    };\r\n    return FirebaseDatabaseProvider;\r\n}(Component));\n\nvar FirebaseDatabaseContextConsumerLifeCycle$1 = (function (_super) {\r\n    __extends(FirebaseDatabaseContextConsumerLifeCycle, _super);\r\n    function FirebaseDatabaseContextConsumerLifeCycle() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.listenToNodeIfNotInContext = function () {\r\n        var _a = this.props, dataTree = _a.dataTree, path = _a.path, listenTo = _a.listenTo;\r\n        if (path in dataTree) {\r\n            return;\r\n        }\r\n        listenTo(this.props);\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.stopListeningToNode = function () {\r\n        var _a = this.props, stopListeningTo = _a.stopListeningTo, path = _a.path;\r\n        stopListeningTo(path);\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidMount = function () {\r\n        this.listenToNodeIfNotInContext();\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidUpdate = function () {\r\n        this.listenToNodeIfNotInContext();\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentWillUnmount = function () {\r\n        this.stopListeningToNode();\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.render = function () {\r\n        return null;\r\n    };\r\n    return FirebaseDatabaseContextConsumerLifeCycle;\r\n}(Component));\n\nvar FirebaseDatabaseNode = (function (_super) {\r\n    __extends(FirebaseDatabaseNode, _super);\r\n    function FirebaseDatabaseNode() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FirebaseDatabaseNode.prototype.render = function () {\r\n        var _this = this;\r\n        var _a = this.props, children = _a.children, path = _a.path;\r\n        return (createElement(FirebaseDatabaseContextConsumer, null, function (context) {\r\n            return (createElement(Fragment, null,\r\n                createElement(FirebaseDatabaseContextConsumerLifeCycle$1, __assign({}, context, { path: path }, _this.props)),\r\n                renderAndAddProps(children, __assign({ path: path }, context.dataTree[path]))));\r\n        }));\r\n    };\r\n    return FirebaseDatabaseNode;\r\n}(Component));\n\nvar FirebaseDatabaseMutationWithContext = (function (_super) {\r\n    __extends(FirebaseDatabaseMutationWithContext, _super);\r\n    function FirebaseDatabaseMutationWithContext() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.createMutationRunner = function () {\r\n            var _a = _this.props, firebase$$1 = _a.firebase, path = _a.path, type = _a.type;\r\n            var firebaseRef = firebase$$1\r\n                .app()\r\n                .database()\r\n                .ref(path);\r\n            var runMutation;\r\n            switch (type) {\r\n                case \"push\": {\r\n                    runMutation = function (value) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var key;\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4, firebaseRef.push(value).key];\r\n                                case 1:\r\n                                    key = _a.sent();\r\n                                    return [2, {\r\n                                            path: path,\r\n                                            value: value,\r\n                                            type: type,\r\n                                            key: key\r\n                                        }];\r\n                            }\r\n                        });\r\n                    }); };\r\n                    break;\r\n                }\r\n                case \"update\": {\r\n                    runMutation = function (value) { return __awaiter(_this, void 0, void 0, function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4, firebaseRef.update(value)];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [2, {\r\n                                            path: path,\r\n                                            value: value,\r\n                                            type: type,\r\n                                            key: null\r\n                                        }];\r\n                            }\r\n                        });\r\n                    }); };\r\n                    break;\r\n                }\r\n                case \"set\": {\r\n                    runMutation = function (value) { return __awaiter(_this, void 0, void 0, function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4, firebaseRef.set(value)];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [2, {\r\n                                            path: path,\r\n                                            value: value,\r\n                                            type: type,\r\n                                            key: null\r\n                                        }];\r\n                            }\r\n                        });\r\n                    }); };\r\n                    break;\r\n                }\r\n                default: {\r\n                    throw new Error(\"Unsupported mutation type \" + type + \". \\nPlease file an issue if you'd like to see us support it !\");\r\n                }\r\n            }\r\n            return runMutation;\r\n        };\r\n        return _this;\r\n    }\r\n    FirebaseDatabaseMutationWithContext.prototype.shouldComponentUpdate = function (nextProps) {\r\n        return (nextProps.path !== this.props.path ||\r\n            nextProps.firebase !== this.props.firebase);\r\n    };\r\n    FirebaseDatabaseMutationWithContext.prototype.render = function () {\r\n        var children = this.props.children;\r\n        var runMutation = this.createMutationRunner();\r\n        return renderAndAddProps(children, __assign({ runMutation: runMutation }, this.props));\r\n    };\r\n    return FirebaseDatabaseMutationWithContext;\r\n}(Component));\r\nvar FirebaseDatabaseMutation = (function (_super) {\r\n    __extends(FirebaseDatabaseMutation, _super);\r\n    function FirebaseDatabaseMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FirebaseDatabaseMutation.prototype.render = function () {\r\n        var _a = this.props, children = _a.children, type = _a.type, path = _a.path;\r\n        return (createElement(FirebaseDatabaseContextConsumer, null, function (context) { return (createElement(FirebaseDatabaseMutationWithContext, __assign({ type: type, path: path }, context, { children: children }))); }));\r\n    };\r\n    return FirebaseDatabaseMutation;\r\n}(Component));\n\nvar FirebaseDatabaseTransactionWithContext = (function (_super) {\r\n    __extends(FirebaseDatabaseTransactionWithContext, _super);\r\n    function FirebaseDatabaseTransactionWithContext() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.createTransactionRunner = function () {\r\n            var _a = _this.props, firebase$$1 = _a.firebase, path = _a.path;\r\n            var firebaseRef = firebase$$1\r\n                .app()\r\n                .database()\r\n                .ref(path);\r\n            var runTransaction = function (_a) {\r\n                var reducer = _a.reducer;\r\n                return __awaiter(_this, void 0, void 0, function () {\r\n                    return __generator(this, function (_b) {\r\n                        switch (_b.label) {\r\n                            case 0: return [4, firebaseRef.transaction(reducer)];\r\n                            case 1:\r\n                                _b.sent();\r\n                                return [2, { path: path }];\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n            return runTransaction;\r\n        };\r\n        return _this;\r\n    }\r\n    FirebaseDatabaseTransactionWithContext.prototype.shouldComponentUpdate = function (nextProps) {\r\n        return (nextProps.path !== this.props.path ||\r\n            nextProps.firebase !== this.props.firebase);\r\n    };\r\n    FirebaseDatabaseTransactionWithContext.prototype.render = function () {\r\n        var children = this.props.children;\r\n        var runTransaction = this.createTransactionRunner();\r\n        return renderAndAddProps(children, __assign({ runTransaction: runTransaction }, this.props));\r\n    };\r\n    return FirebaseDatabaseTransactionWithContext;\r\n}(Component));\r\nvar FirebaseDatabaseTransaction = (function (_super) {\r\n    __extends(FirebaseDatabaseTransaction, _super);\r\n    function FirebaseDatabaseTransaction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FirebaseDatabaseTransaction.prototype.render = function () {\r\n        var _a = this.props, children = _a.children, path = _a.path;\r\n        return (createElement(FirebaseDatabaseContextConsumer, null, function (context) { return (createElement(FirebaseDatabaseTransactionWithContext, __assign({ path: path }, context, { children: children }))); }));\r\n    };\r\n    return FirebaseDatabaseTransaction;\r\n}(Component));\n\nexport { FirebaseDatabaseContextConsumerLifeCycle, FirebaseDatabaseNode, FirebaseDatabaseProvider, FirebaseDatabaseMutation, FirebaseDatabaseTransaction };\n"]},"metadata":{},"sourceType":"module"}