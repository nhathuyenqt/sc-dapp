{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar PdfJs = require('pdfjs-dist');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n['default'] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar PdfJs__namespace = /*#__PURE__*/_interopNamespace(PdfJs);\n\nvar AnnotationType;\n\n(function (AnnotationType) {\n  AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n  AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n  AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n  AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n  AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n  AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n  AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n  AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n  AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n  AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n  AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n  AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n  AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n  AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n  AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n  AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n  AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(AnnotationType || (AnnotationType = {}));\n\nvar AnnotationType$1 = AnnotationType;\n\nvar Button = function (_a) {\n  var children = _a.children,\n      onClick = _a.onClick;\n  return React__namespace.createElement(\"button\", {\n    className: \"rpv-core__button\",\n    onClick: onClick\n  }, children);\n};\n\nvar Menu = function (_a) {\n  var children = _a.children;\n  return React__namespace.createElement(\"ul\", {\n    className: \"rpv-core__menu\"\n  }, children);\n};\n\nvar MenuDivider = function () {\n  return React__namespace.createElement(\"li\", {\n    className: \"rpv-core__menu-divider\"\n  });\n};\n\nvar Icon = function (_a) {\n  var children = _a.children,\n      _b = _a.size,\n      size = _b === void 0 ? 24 : _b;\n  var width = (size || 24) + \"px\";\n  return React__namespace.createElement(\"svg\", {\n    className: \"rpv-core__icon\",\n    height: width,\n    viewBox: \"0 0 24 24\",\n    width: width\n  }, children);\n};\n\nvar CheckIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M23.5,0.499l-16.5,23l-6.5-6.5\"\n  }));\n};\n\nvar classNames = function (classes) {\n  var result = [];\n  Object.keys(classes).forEach(function (clazz) {\n    if (clazz && classes[clazz]) {\n      result.push(clazz);\n    }\n  });\n  return result.join(' ');\n};\n\nvar MenuItem = function (_a) {\n  var _b = _a.checked,\n      checked = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.icon,\n      icon = _c === void 0 ? null : _c,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      onClick = _a.onClick;\n  return React__namespace.createElement(\"li\", {\n    className: classNames({\n      'rpv-core__menu-item': true,\n      'rpv-core__menu-item--disabled': isDisabled\n    }),\n    onClick: onClick\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__menu-item-icon\"\n  }, icon), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__menu-item-label\"\n  }, children), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__menu-item-check\"\n  }, checked && React__namespace.createElement(CheckIcon, null)));\n};\n\nvar MinimalButton = function (_a) {\n  var children = _a.children,\n      _b = _a.isDisabled,\n      isDisabled = _b === void 0 ? false : _b,\n      _c = _a.isSelected,\n      isSelected = _c === void 0 ? false : _c,\n      onClick = _a.onClick;\n  return React__namespace.createElement(\"button\", {\n    className: classNames({\n      'rpv-core__minimal-button': true,\n      'rpv-core__minimal-button--disabled': isDisabled,\n      'rpv-core__minimal-button--selected': isSelected\n    }),\n    onClick: onClick\n  }, children);\n};\n\nvar PrimaryButton = function (_a) {\n  var children = _a.children,\n      onClick = _a.onClick;\n  return React__namespace.createElement(\"button\", {\n    className: \"rpv-core__primary-button\",\n    onClick: onClick\n  }, children);\n};\n\nvar ProgressBar = function (_a) {\n  var progress = _a.progress;\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__progress-bar\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__progress-bar-progress\",\n    style: {\n      width: progress + \"%\"\n    }\n  }, progress, \"%\"));\n};\n\nvar Separator = function () {\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__separator\"\n  });\n};\n\nvar Spinner = function () {\n  return React__namespace.createElement(\"svg\", {\n    className: \"rpv-core__spinner\",\n    width: \"64px\",\n    height: \"64px\",\n    viewBox: \"0 0 32 32\"\n  }, React__namespace.createElement(\"circle\", {\n    className: \"rpv-core__spinner-circle\",\n    cx: \"16\",\n    cy: \"16\",\n    r: \"12\",\n    strokeDasharray: Math.PI * 2 * 9\n  }));\n};\n\nvar TextBox = function (_a) {\n  var _b = _a.placeholder,\n      placeholder = _b === void 0 ? '' : _b,\n      _c = _a.type,\n      type = _c === void 0 ? 'text' : _c,\n      _d = _a.value,\n      value = _d === void 0 ? '' : _d,\n      onChange = _a.onChange,\n      _e = _a.onKeyDown,\n      onKeyDown = _e === void 0 ? function () {} : _e;\n  return React__namespace.createElement(\"input\", {\n    className: \"rpv-core__textbox\",\n    placeholder: placeholder,\n    type: type,\n    value: value,\n    onChange: function (e) {\n      return onChange(e.target.value);\n    },\n    onKeyDown: onKeyDown\n  });\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar useIntersectionObserver = function (props) {\n  var containerRef = React__namespace.useRef(null);\n  var threshold = props.threshold,\n      onVisibilityChanged = props.onVisibilityChanged;\n  useIsomorphicLayoutEffect(function () {\n    var io = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isVisible = entry.isIntersecting;\n        var ratio = entry.intersectionRatio;\n        onVisibilityChanged({\n          isVisible: isVisible,\n          ratio: ratio\n        });\n      });\n    }, {\n      threshold: threshold || 0\n    });\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n  return containerRef;\n};\n\nvar LocalizationContext = React__namespace.createContext({});\nvar core = {\n  askingPassword: {\n    requirePasswordToOpen: \"This document requires a password to open\",\n    submit: \"Submit\"\n  },\n  wrongPassword: {\n    submit: \"Submit\",\n    tryAgain: \"The password is wrong. Please try again\"\n  }\n};\nvar enUs = {\n  core: core\n};\n\nvar LocalizationProvider = function (_a) {\n  var children = _a.children,\n      localization = _a.localization;\n  var defaultL10n = enUs;\n\n  var _b = React__namespace.useState(localization || defaultL10n),\n      l10nData = _b[0],\n      setL10nData = _b[1];\n\n  var setLocalization = function (l10n) {\n    return setL10nData(l10n);\n  };\n\n  return React__namespace.createElement(LocalizationContext.Provider, {\n    value: l10nData\n  }, children(setLocalization));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n  var clickHandler = function (e) {\n    var target = targetRef.current;\n\n    if (target && !target.contains(e.target)) {\n      onClickOutside();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (!closeOnClickOutside) {\n      return;\n    }\n\n    document.addEventListener('click', clickHandler);\n    return function () {\n      document.removeEventListener('click', clickHandler);\n    };\n  }, []);\n};\n\nvar useKeyUp = function (targetKeyCode, handler) {\n  var keyUpHandler = function (e) {\n    e.keyCode === targetKeyCode && handler();\n  };\n\n  React__namespace.useEffect(function () {\n    document.addEventListener('keyup', keyUpHandler);\n    return function () {\n      document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, []);\n};\n\nvar useLockScroll = function () {\n  React__namespace.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n    return function () {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n};\n\nvar ModalBody = function (_a) {\n  var children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      onToggle = _a.onToggle;\n  var contentRef = React__namespace.useRef();\n  useLockScroll();\n  useKeyUp(27, function () {\n    return closeOnEscape && onToggle();\n  });\n  useClickOutside(closeOnClickOutside, contentRef, onToggle);\n  useIsomorphicLayoutEffect(function () {\n    var contentEle = contentRef.current;\n\n    if (!contentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (contentEle.getBoundingClientRect().height >= maxHeight) {\n      contentEle.style.overflow = 'auto';\n      contentEle.style.maxHeight = maxHeight + \"px\";\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__modal-body\",\n    ref: contentRef\n  }, children);\n};\n\nvar ModalOverlay = function (_a) {\n  var children = _a.children;\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__modal-overlay\"\n  }, children);\n};\n\nvar ToggleStatus;\n\n(function (ToggleStatus) {\n  ToggleStatus[\"Close\"] = \"Close\";\n  ToggleStatus[\"Open\"] = \"Open\";\n  ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(ToggleStatus || (ToggleStatus = {}));\n\nvar useToggle = function () {\n  var _a = React__namespace.useState(false),\n      opened = _a[0],\n      setOpened = _a[1];\n\n  var toggle = function (status) {\n    switch (status) {\n      case ToggleStatus.Close:\n        setOpened(false);\n        break;\n\n      case ToggleStatus.Open:\n        setOpened(true);\n        break;\n\n      case ToggleStatus.Toggle:\n      default:\n        setOpened(function (isOpened) {\n          return !isOpened;\n        });\n        break;\n    }\n  };\n\n  return {\n    opened: opened,\n    toggle: toggle\n  };\n};\n\nvar Portal = function (_a) {\n  var content = _a.content,\n      target = _a.target;\n\n  var _b = useToggle(),\n      opened = _b.opened,\n      toggle = _b.toggle;\n\n  return React__namespace.createElement(React__namespace.Fragment, null, target(toggle, opened), opened && content(toggle));\n};\n\nvar Modal = function (_a) {\n  var closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      target = _a.target;\n\n  var renderContent = function (toggle) {\n    return React__namespace.createElement(ModalOverlay, null, React__namespace.createElement(ModalBody, {\n      closeOnClickOutside: closeOnClickOutside,\n      closeOnEscape: closeOnEscape,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React__namespace.createElement(Portal, {\n    target: target,\n    content: renderContent\n  });\n};\n\nvar Position;\n\n(function (Position) {\n  Position[\"TopLeft\"] = \"TOP_LEFT\";\n  Position[\"TopCenter\"] = \"TOP_CENTER\";\n  Position[\"TopRight\"] = \"TOP_RIGHT\";\n  Position[\"RightTop\"] = \"RIGHT_TOP\";\n  Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n  Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n  Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n  Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n  Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n  Position[\"LeftTop\"] = \"LEFT_TOP\";\n  Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n  Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(Position || (Position = {}));\n\nvar Position$1 = Position;\n\nvar calculatePosition = function (content, target, position, offset) {\n  var targetRect = target.getBoundingClientRect();\n  var contentRect = content.getBoundingClientRect();\n  var height = contentRect.height,\n      width = contentRect.width;\n  var top = 0;\n  var left = 0;\n\n  switch (position) {\n    case Position$1.TopLeft:\n      top = targetRect.top - height;\n      left = targetRect.left;\n      break;\n\n    case Position$1.TopCenter:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case Position$1.TopRight:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case Position$1.RightTop:\n      top = targetRect.top;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.RightCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.RightBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.BottomLeft:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left;\n      break;\n\n    case Position$1.BottomCenter:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case Position$1.BottomRight:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case Position$1.LeftTop:\n      top = targetRect.top;\n      left = targetRect.left - width;\n      break;\n\n    case Position$1.LeftCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left - width;\n      break;\n\n    case Position$1.LeftBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left - width;\n      break;\n  }\n\n  return {\n    left: left + (offset.left || 0),\n    top: top + (offset.top || 0)\n  };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n  useIsomorphicLayoutEffect(function () {\n    var targetEle = targetRef.current;\n    var contentEle = contentRef.current;\n    var anchorEle = anchorRef.current;\n\n    if (!contentEle || !targetEle || !anchorEle) {\n      return;\n    }\n\n    var anchorRect = anchorEle.getBoundingClientRect();\n\n    var _a = calculatePosition(contentEle, targetEle, position, offset),\n        top = _a.top,\n        left = _a.left;\n\n    contentEle.style.top = top - anchorRect.top + \"px\";\n    contentEle.style.left = left - anchorRect.left + \"px\";\n  }, []);\n};\n\nvar Arrow = function (_a) {\n  var _b;\n\n  var customClassName = _a.customClassName,\n      position = _a.position;\n  return React__namespace.createElement(\"div\", {\n    className: classNames((_b = {\n      'rpv-core__arrow': true,\n      'rpv-core__arrow--tl': position === Position$1.TopLeft,\n      'rpv-core__arrow--tc': position === Position$1.TopCenter,\n      'rpv-core__arrow--tr': position === Position$1.TopRight,\n      'rpv-core__arrow--rt': position === Position$1.RightTop,\n      'rpv-core__arrow--rc': position === Position$1.RightCenter,\n      'rpv-core__arrow--rb': position === Position$1.RightBottom,\n      'rpv-core__arrow--bl': position === Position$1.BottomLeft,\n      'rpv-core__arrow--bc': position === Position$1.BottomCenter,\n      'rpv-core__arrow--br': position === Position$1.BottomRight,\n      'rpv-core__arrow--lt': position === Position$1.LeftTop,\n      'rpv-core__arrow--lc': position === Position$1.LeftCenter,\n      'rpv-core__arrow--lb': position === Position$1.LeftBottom\n    }, _b[\"\" + customClassName] = customClassName !== '', _b))\n  });\n};\n\nvar PopoverBody = function (_a) {\n  var children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef,\n      onClose = _a.onClose;\n  var contentRef = React__namespace.useRef();\n  var innerRef = React__namespace.useRef();\n  var anchorRef = React__namespace.useRef();\n  useClickOutside(closeOnClickOutside, contentRef, onClose);\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  useIsomorphicLayoutEffect(function () {\n    var innerContentEle = innerRef.current;\n\n    if (!innerContentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n      innerContentEle.style.overflow = 'auto';\n      innerContentEle.style.maxHeight = maxHeight + \"px\";\n    }\n  }, []);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__popover-body\",\n    ref: contentRef\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__popover-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    ref: innerRef\n  }, children)));\n};\n\nvar PopoverOverlay = function (_a) {\n  var closeOnEscape = _a.closeOnEscape,\n      onClose = _a.onClose;\n  useKeyUp(27, function () {\n    return closeOnEscape && onClose();\n  });\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__popover-overlay\"\n  });\n};\n\nvar Popover = function (_a) {\n  var closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n  var targetRef = React__namespace.useRef();\n\n  var renderTarget = function (toggle, opened) {\n    return React__namespace.createElement(\"div\", {\n      ref: targetRef\n    }, target(toggle, opened));\n  };\n\n  var renderContent = function (toggle) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(PopoverOverlay, {\n      closeOnEscape: closeOnEscape,\n      onClose: toggle\n    }), React__namespace.createElement(PopoverBody, {\n      closeOnClickOutside: closeOnClickOutside,\n      offset: offset,\n      position: position,\n      targetRef: targetRef,\n      onClose: toggle\n    }, content(toggle)));\n  };\n\n  return React__namespace.createElement(Portal, {\n    content: renderContent,\n    target: renderTarget\n  });\n};\n\nvar TooltipBody = function (_a) {\n  var children = _a.children,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef;\n  var contentRef = React__namespace.useRef();\n  var anchorRef = React__namespace.useRef();\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__tooltip-body\",\n    ref: contentRef\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__tooltip-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__tooltip-body-content\"\n  }, children)));\n};\n\nvar Tooltip = function (_a) {\n  var content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n  var targetRef = React__namespace.useRef();\n\n  var renderTarget = function (toggle) {\n    var show = function () {\n      toggle(ToggleStatus.Open);\n    };\n\n    var hide = function () {\n      toggle(ToggleStatus.Close);\n    };\n\n    return React__namespace.createElement(\"div\", {\n      ref: targetRef,\n      onMouseEnter: show,\n      onMouseLeave: hide\n    }, target);\n  };\n\n  var renderContent = function () {\n    return React__namespace.createElement(TooltipBody, {\n      offset: offset,\n      position: position,\n      targetRef: targetRef\n    }, content());\n  };\n\n  return React__namespace.createElement(Portal, {\n    target: renderTarget,\n    content: renderContent\n  });\n};\n\nvar SpecialZoomLevel;\n\n(function (SpecialZoomLevel) {\n  SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n  SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n  SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(SpecialZoomLevel || (SpecialZoomLevel = {}));\n\nvar SpecialZoomLevel$1 = SpecialZoomLevel;\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction createStore(initialState) {\n  var state = initialState || {};\n  var listeners = {};\n  return {\n    subscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).concat(handler);\n    },\n    unsubscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).filter(function (f) {\n        return f !== handler;\n      });\n    },\n    update: function (key, data) {\n      var _a;\n\n      state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n      (listeners[key] || []).forEach(function (handler) {\n        return handler(state[key]);\n      });\n    },\n    get: function (key) {\n      return state[key];\n    }\n  };\n}\n\nvar ThemeContext = React__namespace.createContext({\n  currentTheme: 'light',\n  setCurrentTheme: function () {}\n});\n\nvar isDarkMode = function () {\n  return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar ThemeProvider = function (_a) {\n  var children = _a.children,\n      theme = _a.theme;\n  var initialTheme = React__namespace.useMemo(function () {\n    return theme === 'auto' ? isDarkMode() ? 'dark' : 'light' : theme;\n  }, []);\n\n  var _b = React__namespace.useState(initialTheme),\n      currentTheme = _b[0],\n      setCurrentTheme = _b[1];\n\n  React__namespace.useEffect(function () {\n    if (theme !== 'auto') {\n      return;\n    }\n\n    var media = window.matchMedia('(prefers-color-scheme: dark)');\n\n    var handler = function (e) {\n      setCurrentTheme(e.matches ? 'dark' : 'light');\n    };\n\n    media.addEventListener('change', handler);\n    return function () {\n      return media.removeEventListener('change', handler);\n    };\n  }, []);\n  var initialContext = {\n    currentTheme: currentTheme,\n    setCurrentTheme: setCurrentTheme\n  };\n  return React__namespace.createElement(ThemeContext.Provider, {\n    value: initialContext\n  }, children);\n};\n\nvar LayerRenderStatus;\n\n(function (LayerRenderStatus) {\n  LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n  LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(LayerRenderStatus || (LayerRenderStatus = {}));\n\nvar LayerRenderStatus$1 = LayerRenderStatus;\n\nfunction usePrevious(value) {\n  var ref = React__namespace.useRef(value);\n  React__namespace.useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nvar AnnotationBorderStyleType;\n\n(function (AnnotationBorderStyleType) {\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar AnnotationBorderStyleType$1 = AnnotationBorderStyleType;\nvar dateRegex = new RegExp('^D:' + '(\\\\d{4})' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '([Z|+|-])?' + '(\\\\d{2})?' + \"'?\" + '(\\\\d{2})?' + \"'?\");\n\nvar parse$1 = function (value, min, max, defaultValue) {\n  var parsed = parseInt(value, 10);\n  return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\n\nvar convertDate = function (input) {\n  var matches = dateRegex.exec(input);\n\n  if (!matches) {\n    return null;\n  }\n\n  var year = parseInt(matches[1], 10);\n  var month = parse$1(matches[2], 1, 12, 1) - 1;\n  var day = parse$1(matches[3], 1, 31, 1);\n  var hour = parse$1(matches[4], 0, 23, 0);\n  var minute = parse$1(matches[5], 0, 59, 0);\n  var second = parse$1(matches[6], 0, 59, 0);\n  var universalTimeRelation = matches[7] || 'Z';\n  var offsetHour = parse$1(matches[8], 0, 23, 0);\n  var offsetMinute = parse$1(matches[9], 0, 59, 0);\n\n  switch (universalTimeRelation) {\n    case '-':\n      hour += offsetHour;\n      minute += offsetMinute;\n      break;\n\n    case '+':\n      hour -= offsetHour;\n      minute -= offsetMinute;\n      break;\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n  var annotation = _a.annotation;\n  var containerRef = React__namespace.useRef();\n  var dateStr = '';\n\n  if (annotation.modificationDate) {\n    var date = convertDate(annotation.modificationDate);\n    dateStr = date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n  }\n\n  React__namespace.useLayoutEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.id + \"\\\"]\");\n\n    if (!annotationEle) {\n      return;\n    }\n\n    var ele = annotationEle;\n    ele.style.zIndex += 1;\n    return function () {\n      ele.style.zIndex = \"\" + (parseInt(ele.style.zIndex, 10) - 1);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__annotation-popup-wrapper\",\n    style: {\n      top: annotation.annotationType === AnnotationType$1.Popup ? '' : '100%'\n    }\n  }, annotation.title && React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-header\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-title\"\n  }, annotation.title), React__namespace.createElement(\"span\", {\n    className: \"rpv-core__annotation-popup-date\"\n  }, dateStr)), annotation.contents && React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-content\"\n  }, annotation.contents.split('\\n').map(function (item, index) {\n    return React__namespace.createElement(React__namespace.Fragment, {\n      key: index\n    }, item, React__namespace.createElement(\"br\", null));\n  })));\n};\n\nvar TogglePopupBy;\n\n(function (TogglePopupBy) {\n  TogglePopupBy[\"Click\"] = \"Click\";\n  TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\n\nvar useTogglePopup = function () {\n  var _a = useToggle(),\n      opened = _a.opened,\n      toggle = _a.toggle;\n\n  var _b = React__namespace.useState(TogglePopupBy.Hover),\n      togglePopupBy = _b[0],\n      setTooglePopupBy = _b[1];\n\n  var toggleOnClick = function () {\n    switch (togglePopupBy) {\n      case TogglePopupBy.Click:\n        opened && setTooglePopupBy(TogglePopupBy.Hover);\n        toggle(ToggleStatus.Toggle);\n        break;\n\n      case TogglePopupBy.Hover:\n        setTooglePopupBy(TogglePopupBy.Click);\n        toggle(ToggleStatus.Open);\n        break;\n    }\n  };\n\n  var openOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Open);\n  };\n\n  var closeOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Close);\n  };\n\n  return {\n    opened: opened,\n    closeOnHover: closeOnHover,\n    openOnHover: openOnHover,\n    toggleOnClick: toggleOnClick\n  };\n};\n\nvar Annotation = function (_a) {\n  var annotation = _a.annotation,\n      children = _a.children,\n      ignoreBorder = _a.ignoreBorder,\n      hasPopup = _a.hasPopup,\n      isRenderable = _a.isRenderable,\n      page = _a.page,\n      viewport = _a.viewport;\n  var rect = annotation.rect;\n\n  var _b = useTogglePopup(),\n      closeOnHover = _b.closeOnHover,\n      opened = _b.opened,\n      openOnHover = _b.openOnHover,\n      toggleOnClick = _b.toggleOnClick;\n\n  var normalizeRect = function (r) {\n    return [Math.min(r[0], r[2]), Math.min(r[1], r[3]), Math.max(r[0], r[2]), Math.max(r[1], r[3])];\n  };\n\n  var bound = normalizeRect([rect[0], page.view[3] + page.view[1] - rect[1], rect[2], page.view[3] + page.view[1] - rect[3]]);\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var styles = {\n    borderColor: '',\n    borderRadius: '',\n    borderStyle: '',\n    borderWidth: ''\n  };\n\n  if (!ignoreBorder && annotation.borderStyle.width > 0) {\n    switch (annotation.borderStyle.style) {\n      case AnnotationBorderStyleType$1.Dashed:\n        styles.borderStyle = 'dashed';\n        break;\n\n      case AnnotationBorderStyleType$1.Solid:\n        styles.borderStyle = 'solid';\n        break;\n\n      case AnnotationBorderStyleType$1.Underline:\n        styles = Object.assign({\n          borderBottomStyle: 'solid'\n        }, styles);\n        break;\n\n      case AnnotationBorderStyleType$1.Beveled:\n      case AnnotationBorderStyleType$1.Inset:\n    }\n\n    var borderWidth = annotation.borderStyle.width;\n    styles.borderWidth = borderWidth + \"px\";\n\n    if (annotation.borderStyle.style !== AnnotationBorderStyleType$1.Underline) {\n      width = width - 2 * borderWidth;\n      height = height - 2 * borderWidth;\n    }\n\n    var _c = annotation.borderStyle,\n        horizontalCornerRadius = _c.horizontalCornerRadius,\n        verticalCornerRadius = _c.verticalCornerRadius;\n\n    if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n      styles.borderRadius = horizontalCornerRadius + \"px / \" + verticalCornerRadius + \"px\";\n    }\n\n    annotation.color ? styles.borderColor = \"rgb(\" + (annotation.color[0] | 0) + \", \" + (annotation.color[1] | 0) + \", \" + (annotation.color[2] | 0) + \")\" : styles.borderWidth = '0';\n  }\n\n  return React__namespace.createElement(React__namespace.Fragment, null, isRenderable && children({\n    popup: {\n      opened: opened,\n      closeOnHover: closeOnHover,\n      openOnHover: openOnHover,\n      toggleOnClick: toggleOnClick\n    },\n    slot: {\n      attrs: {\n        style: Object.assign({\n          height: height + \"px\",\n          left: bound[0] + \"px\",\n          top: bound[1] + \"px\",\n          transform: \"matrix(\" + viewport.transform.join(',') + \")\",\n          transformOrigin: \"-\" + bound[0] + \"px -\" + bound[1] + \"px\",\n          width: width + \"px\"\n        }, styles)\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, {\n        annotation: annotation\n      }))\n    }\n  }));\n};\n\nvar Caret = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--caret\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Circle = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--circle\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__namespace.createElement(\"circle\", {\n      cy: height / 2,\n      fill: \"none\",\n      rx: width / 2 - borderWidth / 2,\n      ry: height / 2 - borderWidth / 2,\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1\n    })), props.slot.children);\n  });\n};\n\nvar fileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', fileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar FileAttachment = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n\n  var doubleClick = function () {\n    var file = annotation.file;\n    file && downloadFile(file.filename, file.content);\n  };\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: true,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--file-attachment\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onDoubleClick: doubleClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar FreeText = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--free-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Popup = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var isRenderable = !!(annotation.title || annotation.contents);\n  var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n  var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n  useIsomorphicLayoutEffect(function () {\n    if (!annotation.parentId) {\n      return;\n    }\n\n    var parent = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.parentId + \"\\\"]\");\n    var container = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.id + \"\\\"]\");\n\n    if (!parent || !container) {\n      return;\n    }\n\n    var left = parseFloat(parent.style.left);\n    var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n    container.style.left = left + \"px\";\n    container.style.top = top + \"px\";\n    container.style.transformOrigin = \"-\" + left + \"px -\" + top + \"px\";\n  }, []);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--popup\",\n      \"data-annotation-id\": annotation.id\n    }), React__namespace.createElement(PopupWrapper, {\n      annotation: annotation\n    }));\n  });\n};\n\nvar Highlight = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n\n  if (hasQuadPoints) {\n    var annotations = annotation.quadPoints.map(function (quadPoint) {\n      return Object.assign({}, annotation, {\n        rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n        quadPoints: []\n      });\n    });\n    return React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) {\n      return React__namespace.createElement(Highlight, {\n        key: index,\n        annotation: ann,\n        childAnnotation: childAnnotation,\n        page: page,\n        viewport: viewport\n      });\n    }));\n  }\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--highlight\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children), childAnnotation && childAnnotation.annotationType === AnnotationType$1.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Ink = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--ink\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.inkLists && annotation.inkLists.length && React__namespace.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, annotation.inkLists.map(function (inkList, index) {\n      return React__namespace.createElement(\"polyline\", {\n        key: index,\n        fill: \"none\",\n        stroke: \"transparent\",\n        strokeWidth: borderWidth || 1,\n        points: inkList.map(function (item) {\n          return item.x - rect[0] + \",\" + (rect[3] - item.y);\n        }).join(' ')\n      });\n    })), props.slot.children);\n  });\n};\n\nvar Line = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--line\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__namespace.createElement(\"line\", {\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x1: rect[2] - annotation.lineCoordinates[0],\n      x2: rect[2] - annotation.lineCoordinates[2],\n      y1: rect[3] - annotation.lineCoordinates[1],\n      y2: rect[3] - annotation.lineCoordinates[3]\n    })), props.slot.children);\n  });\n};\n\nvar parse = function (pageIndex, destArray) {\n  var bottomOffset;\n  var scale;\n\n  switch (destArray[1].name) {\n    case 'XYZ':\n      bottomOffset = destArray[3];\n      scale = destArray[4];\n      return {\n        bottomOffset: bottomOffset,\n        pageIndex: pageIndex - 1,\n        scaleTo: scale\n      };\n\n    case 'Fit':\n    case 'FitB':\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: SpecialZoomLevel$1.PageFit\n      };\n\n    case 'FitH':\n    case 'FitBH':\n      return {\n        bottomOffset: destArray[2],\n        pageIndex: pageIndex - 1,\n        scaleTo: SpecialZoomLevel$1.PageWidth\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: 1\n      };\n  }\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      return 'object' === typeof destArray[0] ? doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n        return Promise.resolve({\n          pageIndex: pageIndex,\n          destArray: destArray\n        });\n      }) : Promise.resolve({\n        pageIndex: destArray[0],\n        destArray: destArray\n      });\n    }).then(function (_a) {\n      var pageIndex = _a.pageIndex,\n          destArray = _a.destArray;\n      var target = parse(pageIndex, destArray);\n      res(target);\n    });\n  });\n};\n\nvar Link = function (_a) {\n  var annotation = _a.annotation,\n      doc = _a.doc,\n      page = _a.page,\n      viewport = _a.viewport,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n\n  var link = function (e) {\n    e.preventDefault();\n    annotation.action ? onExecuteNamedAction(annotation.action) : getDestination(doc, annotation.dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(bottomOffset ? pageIndex + 1 : pageIndex, bottomOffset, 0, scaleTo);\n    });\n  };\n\n  var isRenderable = !!(annotation.url || annotation.dest || annotation.action);\n  var attrs = annotation.url ? {\n    href: annotation.url,\n    rel: 'noopener noreferrer nofollow',\n    target: annotation.newWindow ? '_blank' : '',\n    title: annotation.url\n  } : {\n    href: '',\n    onClick: link\n  };\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: false,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--link\",\n      \"data-annotation-id\": annotation.id\n    }), React__namespace.createElement(\"a\", __assign({}, attrs)));\n  });\n};\n\nvar Polygon = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polygon\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__namespace.createElement(\"polygon\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return item.x - rect[0] + \",\" + (rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Polyline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polyline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__namespace.createElement(\"polyline\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return item.x - rect[0] + \",\" + (rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Square = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--square\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__namespace.createElement(\"rect\", {\n      height: height - borderWidth,\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x: borderWidth / 2,\n      y: borderWidth / 2,\n      width: width - borderWidth\n    })), props.slot.children);\n  });\n};\n\nvar Squiggly = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--squiggly\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Stamp = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--stamp\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar StrikeOut = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--strike-out\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar CommentIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\"\n  }));\n};\n\nvar HelpIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M21.423 5.406L17.415 9.414\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14.587 6.585L18.607 2.565\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M5.405 21.424L9.413 17.416\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.585 14.588L2.577 18.596\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18.602 21.419L14.595 17.412\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M17.419 14.58L21.428 18.589\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M2.582 5.399L6.588 9.406\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M9.421 6.581L5.412 2.572\"\n  }));\n};\n\nvar KeyIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\"\n  }));\n};\n\nvar NoteIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6 4.5L6 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18 4.5L18 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10 4.5L10 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14 4.5L14 0.5\"\n  }));\n};\n\nvar ParagraphIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M17.5 0.498L17.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10.5 0.498L10.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\"\n  }));\n};\n\nvar TriangleIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\"\n  }));\n};\n\nvar Text = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var name = annotation.name ? annotation.name.toLowerCase() : '';\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), name && React__namespace.createElement(\"div\", {\n      className: \"rpv-core__annotation-text-icon\"\n    }, name === 'check' && React__namespace.createElement(CheckIcon, null), name === 'comment' && React__namespace.createElement(CommentIcon, null), name === 'help' && React__namespace.createElement(HelpIcon, null), name === 'insert' && React__namespace.createElement(TriangleIcon, null), name === 'key' && React__namespace.createElement(KeyIcon, null), name === 'note' && React__namespace.createElement(NoteIcon, null), (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null)), props.slot.children), childAnnotation && childAnnotation.annotationType === AnnotationType$1.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Underline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--underline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar AnnotationLayerBody = function (_a) {\n  var annotations = _a.annotations,\n      containerRef = _a.containerRef,\n      doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var viewport = page.getViewport({\n    rotation: rotation,\n    scale: scale\n  });\n  var clonedViewPort = viewport.clone({\n    dontFlip: true\n  });\n  var filterAnnotations = annotations.filter(function (annotation) {\n    return !annotation.parentId;\n  });\n  React__namespace.useEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    plugins.forEach(function (plugin) {\n      if (plugin.onAnnotationLayerRender) {\n        plugin.onAnnotationLayerRender({\n          annotations: filterAnnotations,\n          container: container,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale\n        });\n      }\n    });\n  }, []);\n  return React__namespace.createElement(React__namespace.Fragment, null, filterAnnotations.map(function (annotation) {\n    var childAnnotation = annotations.find(function (item) {\n      return item.parentId === annotation.id;\n    });\n\n    switch (annotation.annotationType) {\n      case AnnotationType$1.Caret:\n        return React__namespace.createElement(Caret, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Circle:\n        return React__namespace.createElement(Circle, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.FileAttachment:\n        return React__namespace.createElement(FileAttachment, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.FreeText:\n        return React__namespace.createElement(FreeText, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Highlight:\n        return React__namespace.createElement(Highlight, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Ink:\n        return React__namespace.createElement(Ink, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Line:\n        return React__namespace.createElement(Line, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Link:\n        return React__namespace.createElement(Link, {\n          key: annotation.id,\n          annotation: annotation,\n          doc: doc,\n          page: page,\n          viewport: clonedViewPort,\n          onExecuteNamedAction: onExecuteNamedAction,\n          onJumpToDest: onJumpToDest\n        });\n\n      case AnnotationType$1.Polygon:\n        return React__namespace.createElement(Polygon, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Polyline:\n        return React__namespace.createElement(Polyline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Popup:\n        return React__namespace.createElement(Popup, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Square:\n        return React__namespace.createElement(Square, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Squiggly:\n        return React__namespace.createElement(Squiggly, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Stamp:\n        return React__namespace.createElement(Stamp, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.StrikeOut:\n        return React__namespace.createElement(StrikeOut, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Text:\n        return React__namespace.createElement(Text, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Underline:\n        return React__namespace.createElement(Underline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      default:\n        return React__namespace.createElement(React__namespace.Fragment, {\n          key: annotation.id\n        });\n    }\n  }));\n};\n\nvar AnnotationLoader = function (_a) {\n  var page = _a.page,\n      renderAnnotations = _a.renderAnnotations;\n\n  var _b = React__namespace.useState({\n    loading: true,\n    annotations: []\n  }),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React__namespace.useEffect(function () {\n    page.getAnnotations({\n      intent: 'display'\n    }).then(function (result) {\n      setStatus({\n        loading: false,\n        annotations: result\n      });\n    });\n  }, []);\n  return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n  var doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var containerRef = React__namespace.useRef();\n\n  var renderAnnotations = function (annotations) {\n    return React__namespace.createElement(AnnotationLayerBody, {\n      annotations: annotations,\n      containerRef: containerRef,\n      doc: doc,\n      page: page,\n      pageIndex: pageIndex,\n      plugins: plugins,\n      rotation: rotation,\n      scale: scale,\n      onExecuteNamedAction: onExecuteNamedAction,\n      onJumpToDest: onJumpToDest\n    });\n  };\n\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__annotation-layer\"\n  }, React__namespace.createElement(AnnotationLoader, {\n    page: page,\n    renderAnnotations: renderAnnotations\n  }));\n};\n\nvar WithScale = function (_a) {\n  var callback = _a.callback,\n      children = _a.children,\n      rotation = _a.rotation,\n      scale = _a.scale;\n  useIsomorphicLayoutEffect(function () {\n    callback();\n  }, [rotation, scale]);\n  return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nvar CanvasLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var canvasRef = React__namespace.useRef();\n  var renderTask = React__namespace.useRef();\n\n  var _b = React__namespace.useState(false),\n      rendered = _b[0],\n      setRendered = _b[1];\n\n  var devicePixelRatio = window.devicePixelRatio || 1;\n\n  var renderCanvas = function () {\n    setRendered(false);\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvasEle = canvasRef.current;\n    plugins.forEach(function (plugin) {\n      if (plugin.onCanvasLayerRender) {\n        plugin.onCanvasLayerRender({\n          ele: canvasEle,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale,\n          status: LayerRenderStatus$1.PreRender\n        });\n      }\n    });\n    canvasEle.height = height * devicePixelRatio;\n    canvasEle.width = width * devicePixelRatio;\n    canvasEle.style.opacity = '0';\n    var canvasContext = canvasEle.getContext('2d', {\n      alpha: false\n    });\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale * devicePixelRatio\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      setRendered(true);\n      canvasEle.style.removeProperty('opacity');\n      plugins.forEach(function (plugin) {\n        if (plugin.onCanvasLayerRender) {\n          plugin.onCanvasLayerRender({\n            ele: canvasEle,\n            pageIndex: pageIndex,\n            rotation: rotation,\n            scale: scale,\n            status: LayerRenderStatus$1.DidRender\n          });\n        }\n      });\n    }, function () {\n      setRendered(true);\n    });\n  };\n\n  return React__namespace.createElement(WithScale, {\n    callback: renderCanvas,\n    rotation: rotation,\n    scale: scale\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__canvas-layer\",\n    style: {\n      height: height + \"px\",\n      width: width + \"px\"\n    }\n  }, !rendered && React__namespace.createElement(\"div\", {\n    className: \"rpv-core__canvas-layer-loader\"\n  }, React__namespace.createElement(Spinner, null)), React__namespace.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      transform: \"scale(\" + 1 / devicePixelRatio + \")\",\n      transformOrigin: \"top left\"\n    }\n  })));\n};\n\nvar SvgLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var containerRef = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.innerHTML = '';\n  };\n\n  var renderSvg = function () {\n    var containerEle = containerRef.current;\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    page.getOperatorList().then(function (operatorList) {\n      empty();\n      var graphic = new PdfJs__namespace.SVGGraphics(page.commonObjs, page.objs);\n      graphic.getSVG(operatorList, viewport).then(function (svg) {\n        svg.style.height = height + \"px\";\n        svg.style.width = width + \"px\";\n        containerEle.appendChild(svg);\n      });\n    });\n  };\n\n  return React__namespace.createElement(WithScale, {\n    callback: renderSvg,\n    rotation: rotation,\n    scale: scale\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__svg-layer\",\n    ref: containerRef\n  }));\n};\n\nvar TextLayer = function (_a) {\n  var page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale;\n  var containerRef = React__namespace.useRef();\n  var renderTask = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var spans = containerEle.querySelectorAll('span.rpv-core__text-layer-text');\n    var numSpans = spans.length;\n\n    for (var i = 0; i < numSpans; i++) {\n      var span = spans[i];\n      containerEle.removeChild(span);\n    }\n  };\n\n  var renderText = function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    plugins.forEach(function (plugin) {\n      if (plugin.onTextLayerRender) {\n        plugin.onTextLayerRender({\n          ele: containerEle,\n          pageIndex: pageIndex,\n          scale: scale,\n          status: LayerRenderStatus$1.PreRender\n        });\n      }\n    });\n    page.getTextContent().then(function (textContent) {\n      empty();\n      renderTask.current = PdfJs__namespace.renderTextLayer({\n        container: containerEle,\n        textContent: textContent,\n        viewport: viewport,\n        enhanceTextSelection: true\n      });\n      renderTask.current.promise.then(function () {\n        var spans = containerEle.childNodes;\n        var numSpans = spans.length;\n\n        for (var i = 0; i < numSpans; i++) {\n          var span = spans[i];\n          span.classList.add('rpv-core__text-layer-text');\n        }\n\n        plugins.forEach(function (plugin) {\n          if (plugin.onTextLayerRender) {\n            plugin.onTextLayerRender({\n              ele: containerEle,\n              pageIndex: pageIndex,\n              scale: scale,\n              status: LayerRenderStatus$1.DidRender\n            });\n          }\n        });\n      }, function () {});\n    });\n  };\n\n  return React__namespace.createElement(WithScale, {\n    callback: renderText,\n    rotation: rotation,\n    scale: scale\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__text-layer\",\n    ref: containerRef\n  }));\n};\n\nvar NUMBER_OF_OVERSCAN_PAGES = 2;\n\nvar PageLayer = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      height = _a.height,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest,\n      onPageVisibilityChanged = _a.onPageVisibilityChanged;\n\n  var _b = React__namespace.useState({\n    page: null,\n    pageHeight: height,\n    pageWidth: width,\n    viewportRotation: 0\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var page = pageSize.page,\n      pageHeight = pageSize.pageHeight,\n      pageWidth = pageSize.pageWidth;\n  var prevIsCalculated = React__namespace.useRef(false);\n  var intersectionThreshold = Array(10).fill(null).map(function (_, i) {\n    return i / 10;\n  });\n  var scaledWidth = pageWidth * scale;\n  var scaledHeight = pageHeight * scale;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  var w = isVertical ? scaledWidth : scaledHeight;\n  var h = isVertical ? scaledHeight : scaledWidth;\n\n  var determinePageSize = function () {\n    if (prevIsCalculated.current) {\n      return;\n    }\n\n    prevIsCalculated.current = true;\n    doc.getPage(pageIndex + 1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      setPageSize({\n        page: pdfPage,\n        pageHeight: viewport.height,\n        pageWidth: viewport.width,\n        viewportRotation: viewport.rotation\n      });\n    });\n  };\n\n  var visibilityChanged = function (params) {\n    onPageVisibilityChanged(pageIndex, params.isVisible ? params.ratio : -1);\n\n    if (params.isVisible) {\n      determinePageSize();\n    }\n  };\n\n  var defaultPageRenderer = function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, props.canvasLayer.children, props.textLayer.children, props.annotationLayer.children);\n  };\n\n  var renderPageLayer = renderPage || defaultPageRenderer;\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  var containerRef = useIntersectionObserver({\n    threshold: intersectionThreshold,\n    onVisibilityChanged: visibilityChanged\n  });\n  React__namespace.useEffect(function () {\n    if (currentPage - NUMBER_OF_OVERSCAN_PAGES <= pageIndex && pageIndex <= currentPage + NUMBER_OF_OVERSCAN_PAGES) {\n      determinePageSize();\n    }\n  }, [currentPage]);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__page-layer\",\n    \"data-testid\": \"viewer-page-layer-\" + pageIndex,\n    style: {\n      height: h + \"px\",\n      width: w + \"px\"\n    }\n  }, !page ? React__namespace.createElement(Spinner, null) : React__namespace.createElement(React__namespace.Fragment, null, renderPageLayer({\n    annotationLayer: {\n      attrs: {},\n      children: React__namespace.createElement(AnnotationLayer, {\n        doc: doc,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale,\n        onExecuteNamedAction: onExecuteNamedAction,\n        onJumpToDest: onJumpToDest\n      })\n    },\n    canvasLayer: {\n      attrs: {},\n      children: React__namespace.createElement(CanvasLayer, {\n        height: h,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale,\n        width: w\n      })\n    },\n    doc: doc,\n    height: h,\n    pageIndex: pageIndex,\n    rotation: rotation,\n    scale: scale,\n    svgLayer: {\n      attrs: {},\n      children: React__namespace.createElement(SvgLayer, {\n        height: h,\n        page: page,\n        rotation: rotationNumber,\n        scale: scale,\n        width: w\n      })\n    },\n    textLayer: {\n      attrs: {},\n      children: React__namespace.createElement(TextLayer, {\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale\n      })\n    },\n    width: w\n  }), plugins.map(function (plugin, idx) {\n    return plugin.renderPageLayer ? React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    }, plugin.renderPageLayer({\n      doc: doc,\n      height: h,\n      pageIndex: pageIndex,\n      rotation: rotation,\n      scale: scale,\n      width: w\n    })) : React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    });\n  })));\n};\n\nvar getFileExt = function (url) {\n  var str = url.split(/\\./).pop();\n  return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\n\nvar calculateScale = function (container, pageHeight, pageWidth, scale) {\n  switch (scale) {\n    case SpecialZoomLevel$1.ActualSize:\n      return 1;\n\n    case SpecialZoomLevel$1.PageFit:\n      return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (container.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n\n    case SpecialZoomLevel$1.PageWidth:\n      return (container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n  }\n};\n\nvar Inner = function (_a) {\n  var doc = _a.doc,\n      initialPage = _a.initialPage,\n      pageSize = _a.pageSize,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      viewerState = _a.viewerState,\n      onDocumentLoad = _a.onDocumentLoad,\n      onOpenFile = _a.onOpenFile,\n      onPageChange = _a.onPageChange,\n      onZoom = _a.onZoom;\n  var containerRef = React__namespace.useRef(null);\n  var pagesRef = React__namespace.useRef(null);\n\n  var _b = React__namespace.useState(0),\n      currentPage = _b[0],\n      setCurrentPage = _b[1];\n\n  var _c = React__namespace.useState(0),\n      rotation = _c[0],\n      setRotation = _c[1];\n\n  var stateRef = React__namespace.useRef(viewerState);\n\n  var _d = React__namespace.useState(pageSize.scale),\n      scale = _d[0],\n      setScale = _d[1];\n\n  var numPages = doc.numPages;\n  var pageWidth = pageSize.pageWidth,\n      pageHeight = pageSize.pageHeight;\n  var arr = Array(numPages).fill(null);\n  var pageVisibility = arr.map(function () {\n    return 0;\n  });\n  var pageRefs = arr.map(function () {\n    return React__namespace.useRef();\n  });\n\n  var setViewerState = function (viewerState) {\n    var newState = viewerState;\n    plugins.forEach(function (plugin) {\n      if (plugin.onViewerStateChange) {\n        newState = plugin.onViewerStateChange(newState);\n      }\n    });\n    stateRef.current = newState;\n  };\n\n  var getPagesContainer = function () {\n    return pagesRef.current;\n  };\n\n  var getPageElement = function (pageIndex) {\n    if (pageIndex < 0 || pageIndex >= numPages) {\n      return null;\n    }\n\n    return pageRefs[pageIndex].current;\n  };\n\n  var getViewerState = function () {\n    return stateRef.current;\n  };\n\n  var jumpToDestination = function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n    var pagesContainer = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesContainer || !currentState) {\n      return;\n    }\n\n    var newPageIndex = pageIndex + 1;\n    doc.getPage(newPageIndex).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var top = 0;\n      var bottom = bottomOffset || 0;\n      var left = leftOffset || 0;\n      var updateScale = currentState.scale;\n\n      switch (scaleTo) {\n        case SpecialZoomLevel$1.PageFit:\n          top = 0;\n          left = 0;\n          zoom(SpecialZoomLevel$1.PageFit);\n          break;\n\n        case SpecialZoomLevel$1.PageWidth:\n          updateScale = calculateScale(pagesContainer, pageHeight, pageWidth, SpecialZoomLevel$1.PageWidth);\n          top = (viewport.height - bottom) * updateScale;\n          left = left * updateScale;\n          zoom(updateScale);\n          break;\n\n        default:\n          top = (viewport.height - bottom) * currentState.scale;\n          left = left * currentState.scale;\n          break;\n      }\n\n      var targetPageEle = pageRefs[pageIndex].current;\n\n      if (targetPageEle) {\n        pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n        pagesContainer.scrollLeft = targetPageEle.offsetLeft + left;\n      }\n    });\n  };\n\n  var jumpToPage = function (pageIndex) {\n    if (pageIndex < 0 || pageIndex >= numPages) {\n      return;\n    }\n\n    var pagesContainer = pagesRef.current;\n    var targetPage = pageRefs[pageIndex].current;\n\n    if (pagesContainer && targetPage) {\n      pagesContainer.scrollTop = targetPage.offsetTop;\n      pagesContainer.scrollLeft = targetPage.offsetLeft;\n    }\n\n    setCurrentPage(pageIndex);\n  };\n\n  var openFile = function (file) {\n    if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n      return;\n    }\n\n    new Promise(function (resolve) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onload = function () {\n        var bytes = new Uint8Array(reader.result);\n        resolve(bytes);\n      };\n    }).then(function (data) {\n      onOpenFile(file.name, data);\n    });\n  };\n\n  var rotate = function (updateRotation) {\n    setRotation(updateRotation);\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: updateRotation,\n      scale: scale\n    });\n  };\n\n  var zoom = function (newScale) {\n    var pagesEle = pagesRef.current;\n    var updateScale = pagesEle ? typeof newScale === 'string' ? calculateScale(pagesEle, pageHeight, pageWidth, newScale) : newScale : 1;\n    setScale(updateScale);\n    onZoom({\n      doc: doc,\n      scale: updateScale\n    });\n  };\n\n  React__namespace.useEffect(function () {\n    var pagesEle = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesEle || !currentState) {\n      return;\n    }\n\n    pagesEle.scrollTop = pagesEle.scrollTop * scale / currentState.scale;\n    pagesEle.scrollLeft = pagesEle.scrollLeft * scale / currentState.scale;\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentState.pageIndex,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      scale: scale\n    });\n  }, [scale]);\n\n  var getPluginMethods = function () {\n    return {\n      getPageElement: getPageElement,\n      getPagesContainer: getPagesContainer,\n      getViewerState: getViewerState,\n      jumpToDestination: jumpToDestination,\n      jumpToPage: jumpToPage,\n      openFile: openFile,\n      rotate: rotate,\n      setViewerState: setViewerState,\n      zoom: zoom\n    };\n  };\n\n  React__namespace.useEffect(function () {\n    var pluginMethods = getPluginMethods();\n    plugins.forEach(function (plugin) {\n      if (plugin.install) {\n        plugin.install(pluginMethods);\n      }\n    });\n    return function () {\n      plugins.forEach(function (plugin) {\n        if (plugin.uninstall) {\n          plugin.uninstall(pluginMethods);\n        }\n      });\n    };\n  }, []);\n  React__namespace.useEffect(function () {\n    onDocumentLoad({\n      doc: doc\n    });\n    plugins.forEach(function (plugin) {\n      plugin.onDocumentLoad && plugin.onDocumentLoad({\n        doc: doc\n      });\n    });\n\n    if (initialPage) {\n      jumpToPage(initialPage);\n    }\n  }, []);\n  React__namespace.useEffect(function () {\n    onPageChange({\n      currentPage: currentPage,\n      doc: doc\n    });\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      scale: scale\n    });\n  }, [currentPage]);\n\n  var pageVisibilityChanged = function (pageIndex, ratio) {\n    pageVisibility[pageIndex] = ratio;\n    var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n      return item > array[maxIndex] ? index : maxIndex;\n    }, 0);\n    setCurrentPage(maxRatioPage);\n  };\n\n  var executeNamedAction = function (action) {\n    var previousPage = currentPage - 1;\n    var nextPage = currentPage + 1;\n\n    switch (action) {\n      case 'FirstPage':\n        jumpToPage(0);\n        break;\n\n      case 'LastPage':\n        jumpToPage(numPages - 1);\n        break;\n\n      case 'NextPage':\n        nextPage < numPages && jumpToPage(nextPage);\n        break;\n\n      case 'PrevPage':\n        previousPage >= 0 && jumpToPage(previousPage);\n        break;\n    }\n  };\n\n  var renderViewer = function () {\n    var slot = {\n      attrs: {\n        ref: containerRef,\n        style: {\n          height: '100%'\n        }\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null),\n      subSlot: {\n        attrs: {\n          ref: pagesRef,\n          style: {\n            height: '100%',\n            overflow: 'auto',\n            position: 'relative'\n          }\n        },\n        children: React__namespace.createElement(React__namespace.Fragment, null, Array(numPages).fill(0).map(function (_, index) {\n          return React__namespace.createElement(\"div\", {\n            className: \"rpv-core__inner-page\",\n            key: \"pagelayer-\" + index,\n            ref: function (ref) {\n              pageRefs[index].current = ref;\n            }\n          }, React__namespace.createElement(PageLayer, {\n            currentPage: currentPage,\n            doc: doc,\n            height: pageHeight,\n            pageIndex: index,\n            plugins: plugins,\n            renderPage: renderPage,\n            rotation: rotation,\n            scale: scale,\n            width: pageWidth,\n            onExecuteNamedAction: executeNamedAction,\n            onJumpToDest: jumpToDestination,\n            onPageVisibilityChanged: pageVisibilityChanged\n          }));\n        }))\n      }\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.renderViewer) {\n        slot = plugin.renderViewer({\n          containerRef: containerRef,\n          doc: doc,\n          pageHeight: pageHeight,\n          pageWidth: pageWidth,\n          rotation: rotation,\n          slot: slot,\n          jumpToPage: jumpToPage,\n          openFile: openFile,\n          rotate: rotate,\n          zoom: zoom\n        });\n      }\n    });\n    return slot;\n  };\n\n  var renderSlot = function (slot) {\n    return React__namespace.createElement(\"div\", __assign({}, slot.attrs, {\n      style: slot.attrs && slot.attrs.style ? slot.attrs.style : {}\n    }), slot.children, slot.subSlot && renderSlot(slot.subSlot));\n  };\n\n  return renderSlot(renderViewer());\n};\n\nvar LEVELS = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6, 5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10];\n\nvar decrease = function (currentLevel) {\n  var found = LEVELS.findIndex(function (item) {\n    return item >= currentLevel;\n  });\n  return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar PageSizeCalculator = function (_a) {\n  var defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      render = _a.render;\n  var pagesRef = React__namespace.useRef(null);\n\n  var _b = React__namespace.useState({\n    pageHeight: 0,\n    pageWidth: 0,\n    scale: 1\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  React__namespace.useEffect(function () {\n    doc.getPage(1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var pagesEle = pagesRef.current;\n\n      if (!pagesEle) {\n        return;\n      }\n\n      var scaled = (pagesEle.clientWidth - 2 * 50) / w;\n      var scale = defaultScale ? typeof defaultScale === 'string' ? calculateScale(pagesEle, h, w, defaultScale) : defaultScale : decrease(scaled);\n      setPageSize({\n        pageHeight: h,\n        pageWidth: w,\n        scale: scale\n      });\n    });\n  }, [doc]);\n  var pageWidth = pageSize.pageWidth;\n  return pageWidth === 0 ? React__namespace.createElement(\"div\", {\n    className: \"rpv-core__page-size-calculator\",\n    ref: pagesRef\n  }, React__namespace.createElement(Spinner, null)) : render(pageSize);\n};\n\nvar useIsMounted = function () {\n  var isMountedRef = React__namespace.useRef(false);\n  React__namespace.useEffect(function () {\n    isMountedRef.current = true;\n    return function () {\n      isMountedRef.current = false;\n    };\n  }, []);\n  return isMountedRef;\n};\n\nvar LoadingStatus = function () {\n  function LoadingStatus() {}\n\n  return LoadingStatus;\n}();\n\nvar AskForPasswordState = function (_super) {\n  __extends(AskForPasswordState, _super);\n\n  function AskForPasswordState(verifyPasswordFn) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPasswordFn = verifyPasswordFn;\n    return _this;\n  }\n\n  return AskForPasswordState;\n}(LoadingStatus);\n\nvar AskingPassword = function (_a) {\n  var verifyPasswordFn = _a.verifyPasswordFn;\n  var l10n = React__namespace.useContext(LocalizationContext);\n\n  var _b = React__namespace.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var submit = function () {\n    return verifyPasswordFn(password);\n  };\n\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-wrapper\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-message\"\n  }, l10n.core.askingPassword.requirePasswordToOpen, \":\"), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-body\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-input\"\n  }, React__namespace.createElement(TextBox, {\n    type: \"password\",\n    value: password,\n    onChange: setPassword\n  })), React__namespace.createElement(PrimaryButton, {\n    onClick: submit\n  }, l10n.core.askingPassword.submit))));\n};\n\nvar CompletedState = function (_super) {\n  __extends(CompletedState, _super);\n\n  function CompletedState(doc) {\n    var _this = _super.call(this) || this;\n\n    _this.doc = doc;\n    return _this;\n  }\n\n  return CompletedState;\n}(LoadingStatus);\n\nvar FailureState = function (_super) {\n  __extends(FailureState, _super);\n\n  function FailureState(error) {\n    var _this = _super.call(this) || this;\n\n    _this.error = error;\n    return _this;\n  }\n\n  return FailureState;\n}(LoadingStatus);\n\nvar LoadingState = function (_super) {\n  __extends(LoadingState, _super);\n\n  function LoadingState(percentages) {\n    var _this = _super.call(this) || this;\n\n    _this.percentages = percentages;\n    return _this;\n  }\n\n  return LoadingState;\n}(LoadingStatus);\n\nvar WrongPassword = function (_a) {\n  var verifyPasswordFn = _a.verifyPasswordFn;\n  var l10n = React__namespace.useContext(LocalizationContext);\n\n  var _b = React__namespace.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var submit = function () {\n    return verifyPasswordFn(password);\n  };\n\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-wrapper\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-message\"\n  }, l10n.core.wrongPassword.tryAgain, \":\"), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-body\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-input\"\n  }, React__namespace.createElement(TextBox, {\n    type: \"password\",\n    value: password,\n    onChange: setPassword\n  })), React__namespace.createElement(\"button\", {\n    className: \"rpv-core__asking-password-button\",\n    onClick: submit\n  }, l10n.core.wrongPassword.submit))));\n};\n\nvar WrongPasswordState = function (_super) {\n  __extends(WrongPasswordState, _super);\n\n  function WrongPasswordState(verifyPasswordFn) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPasswordFn = verifyPasswordFn;\n    return _this;\n  }\n\n  return WrongPasswordState;\n}(LoadingStatus);\n\nvar DocumentLoader = function (_a) {\n  var characterMap = _a.characterMap,\n      file = _a.file,\n      httpHeaders = _a.httpHeaders,\n      render = _a.render,\n      renderError = _a.renderError,\n      renderLoader = _a.renderLoader,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      withCredentials = _a.withCredentials;\n\n  var _b = React__namespace.useState(new LoadingState(0)),\n      status = _b[0],\n      setStatus = _b[1];\n\n  var _c = React__namespace.useState(0),\n      percentages = _c[0],\n      setPercentages = _c[1];\n\n  var _d = React__namespace.useState(null),\n      loadedDocument = _d[0],\n      setLoadedDocument = _d[1];\n\n  var isMounted = useIsMounted();\n  React__namespace.useEffect(function () {\n    setStatus(new LoadingState(0));\n    var worker = new PdfJs__namespace.PDFWorker({\n      name: \"PDFWorker_\" + Date.now()\n    });\n    var params = Object.assign({\n      httpHeaders: httpHeaders,\n      withCredentials: withCredentials,\n      worker: worker\n    }, 'string' === typeof file ? {\n      url: file\n    } : {\n      data: file\n    }, characterMap ? {\n      cMapUrl: characterMap.url,\n      cMapPacked: characterMap.isCompressed\n    } : {});\n    var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n    var loadingTask = PdfJs__namespace.getDocument(transformParams);\n\n    loadingTask.onPassword = function (verifyPassword, reason) {\n      switch (reason) {\n        case PdfJs__namespace.PasswordResponses.NEED_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword));\n          break;\n\n        case PdfJs__namespace.PasswordResponses.INCORRECT_PASSWORD:\n          isMounted.current && setStatus(new WrongPasswordState(verifyPassword));\n          break;\n      }\n    };\n\n    loadingTask.onProgress = function (progress) {\n      progress.total > 0 ? isMounted.current && setPercentages(Math.min(100, 100 * progress.loaded / progress.total)) : isMounted.current && setPercentages(100);\n    };\n\n    loadingTask.promise.then(function (doc) {\n      return isMounted.current && setLoadedDocument(doc);\n    }, function (err) {\n      return isMounted.current && !worker.destroyed && setStatus(new FailureState({\n        message: err.message || 'Cannot load document',\n        name: err.name\n      }));\n    });\n    return function () {\n      loadingTask.destroy();\n      worker.destroy();\n    };\n  }, [file]);\n  React__namespace.useEffect(function () {\n    percentages === 100 && loadedDocument ? isMounted.current && setStatus(new CompletedState(loadedDocument)) : isMounted.current && setStatus(new LoadingState(percentages));\n  }, [percentages, loadedDocument]);\n\n  switch (true) {\n    case status instanceof AskForPasswordState:\n      return React__namespace.createElement(AskingPassword, {\n        verifyPasswordFn: status.verifyPasswordFn\n      });\n\n    case status instanceof WrongPasswordState:\n      return React__namespace.createElement(WrongPassword, {\n        verifyPasswordFn: status.verifyPasswordFn\n      });\n\n    case status instanceof CompletedState:\n      return render(status.doc);\n\n    case status instanceof FailureState:\n      return renderError ? renderError(status.error) : React__namespace.createElement(\"div\", {\n        className: \"rpv-core__doc-error\"\n      }, React__namespace.createElement(\"div\", {\n        className: \"rpv-core__doc-error-text\"\n      }, status.error.message));\n\n    case status instanceof LoadingState:\n      return React__namespace.createElement(\"div\", {\n        className: \"rpv-core__doc-loading\"\n      }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null));\n\n    default:\n      return React__namespace.createElement(\"div\", {\n        className: \"rpv-core__doc-loading\"\n      }, React__namespace.createElement(Spinner, null));\n  }\n};\n\nvar isSameUrl = function (a, b) {\n  var typeA = typeof a;\n  var typeB = typeof b;\n\n  if (typeA === 'string' && typeB === 'string' && a === b) {\n    return true;\n  }\n\n  if (typeA === 'object' && typeB === 'object') {\n    return a.length === b.length && a.every(function (v, i) {\n      return v === b[i];\n    });\n  }\n\n  return false;\n};\n\nvar Viewer = function (_a) {\n  var characterMap = _a.characterMap,\n      defaultScale = _a.defaultScale,\n      fileUrl = _a.fileUrl,\n      _b = _a.httpHeaders,\n      httpHeaders = _b === void 0 ? {} : _b,\n      _c = _a.initialPage,\n      initialPage = _c === void 0 ? 0 : _c,\n      localization = _a.localization,\n      _d = _a.plugins,\n      plugins = _d === void 0 ? [] : _d,\n      renderError = _a.renderError,\n      renderPage = _a.renderPage,\n      renderLoader = _a.renderLoader,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      _e = _a.theme,\n      theme = _e === void 0 ? 'light' : _e,\n      _f = _a.withCredentials,\n      withCredentials = _f === void 0 ? false : _f,\n      _g = _a.onDocumentLoad,\n      onDocumentLoad = _g === void 0 ? function () {} : _g,\n      _h = _a.onPageChange,\n      onPageChange = _h === void 0 ? function () {} : _h,\n      _j = _a.onZoom,\n      onZoom = _j === void 0 ? function () {} : _j;\n\n  var _k = React__namespace.useState({\n    data: fileUrl,\n    name: typeof fileUrl === 'string' ? fileUrl : '',\n    shouldLoad: false\n  }),\n      file = _k[0],\n      setFile = _k[1];\n\n  var openFile = function (fileName, data) {\n    setFile({\n      data: data,\n      name: fileName,\n      shouldLoad: true\n    });\n  };\n\n  var _l = React__namespace.useState(false),\n      visible = _l[0],\n      setVisible = _l[1];\n\n  var prevFile = usePrevious(file);\n  React__namespace.useEffect(function () {\n    if (!isSameUrl(prevFile.data, fileUrl)) {\n      setFile({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: visible\n      });\n    }\n  }, [fileUrl, visible]);\n\n  var visibilityChanged = function (params) {\n    setVisible(params.isVisible);\n\n    if (params.isVisible) {\n      setFile(function (currentFile) {\n        return Object.assign({}, currentFile, {\n          shouldLoad: true\n        });\n      });\n    }\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: visibilityChanged\n  });\n  return React__namespace.createElement(ThemeProvider, {\n    theme: theme\n  }, React__namespace.createElement(LocalizationProvider, {\n    localization: localization\n  }, function (_) {\n    var themeContext = React__namespace.useContext(ThemeContext);\n    return React__namespace.createElement(\"div\", {\n      ref: containerRef,\n      className: \"rpv-core__viewer rpv-core__viewer--\" + themeContext.currentTheme,\n      \"data-testid\": \"viewer\",\n      style: {\n        height: '100%',\n        width: '100%'\n      }\n    }, file.shouldLoad && React__namespace.createElement(DocumentLoader, {\n      characterMap: characterMap,\n      file: file.data,\n      httpHeaders: httpHeaders,\n      render: function (doc) {\n        return React__namespace.createElement(PageSizeCalculator, {\n          defaultScale: defaultScale,\n          doc: doc,\n          render: function (ps) {\n            return React__namespace.createElement(Inner, {\n              doc: doc,\n              initialPage: initialPage,\n              pageSize: ps,\n              plugins: plugins,\n              renderPage: renderPage,\n              viewerState: {\n                file: file,\n                pageIndex: initialPage,\n                pageHeight: ps.pageHeight,\n                pageWidth: ps.pageWidth,\n                rotation: 0,\n                scale: ps.scale\n              },\n              onDocumentLoad: onDocumentLoad,\n              onOpenFile: openFile,\n              onPageChange: onPageChange,\n              onZoom: onZoom\n            });\n          }\n        });\n      },\n      renderError: renderError,\n      renderLoader: renderLoader,\n      transformGetDocumentParams: transformGetDocumentParams,\n      withCredentials: withCredentials\n    }));\n  }));\n};\n\nvar Worker = function (_a) {\n  var children = _a.children,\n      workerUrl = _a.workerUrl;\n  PdfJs__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n  return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nexports.AnnotationType = AnnotationType$1;\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LayerRenderStatus = LayerRenderStatus$1;\nexports.LocalizationContext = LocalizationContext;\nexports.LocalizationProvider = LocalizationProvider;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.Position = Position$1;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.SpecialZoomLevel = SpecialZoomLevel$1;\nexports.Spinner = Spinner;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.ThemeProvider = ThemeProvider;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;","map":{"version":3,"sources":["/Users/kzjouf/Desktop/project/scdapp/node_modules/@react-pdf-viewer/core/lib/cjs/core.js"],"names":["Object","defineProperty","exports","value","React","require","PdfJs","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","PdfJs__namespace","AnnotationType","AnnotationType$1","Button","_a","children","onClick","createElement","className","Menu","MenuDivider","Icon","_b","size","width","height","viewBox","CheckIcon","classNames","classes","result","clazz","push","join","MenuItem","checked","_c","icon","_d","isDisabled","MinimalButton","isSelected","PrimaryButton","ProgressBar","progress","style","Separator","Spinner","cx","cy","r","strokeDasharray","Math","PI","TextBox","placeholder","type","onChange","_e","onKeyDown","target","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","useIntersectionObserver","props","containerRef","useRef","threshold","onVisibilityChanged","io","IntersectionObserver","entries","entry","isVisible","isIntersecting","ratio","intersectionRatio","container","current","observe","unobserve","LocalizationContext","createContext","core","askingPassword","requirePasswordToOpen","submit","wrongPassword","tryAgain","enUs","LocalizationProvider","localization","defaultL10n","useState","l10nData","setL10nData","setLocalization","l10n","Provider","useClickOutside","closeOnClickOutside","targetRef","onClickOutside","clickHandler","contains","document","addEventListener","removeEventListener","useKeyUp","targetKeyCode","handler","keyUpHandler","keyCode","useLockScroll","originalStyle","getComputedStyle","body","overflow","ModalBody","closeOnEscape","onToggle","contentRef","contentEle","maxHeight","clientHeight","getBoundingClientRect","ref","ModalOverlay","ToggleStatus","useToggle","opened","setOpened","toggle","status","Close","Open","Toggle","isOpened","Portal","content","Fragment","Modal","renderContent","Position","Position$1","calculatePosition","position","offset","targetRect","contentRect","top","left","TopLeft","TopCenter","TopRight","RightTop","RightCenter","RightBottom","BottomLeft","BottomCenter","BottomRight","LeftTop","LeftCenter","LeftBottom","usePosition","anchorRef","targetEle","anchorEle","anchorRect","Arrow","customClassName","PopoverBody","onClose","innerRef","innerContentEle","PopoverOverlay","Popover","renderTarget","TooltipBody","Tooltip","show","hide","onMouseEnter","onMouseLeave","SpecialZoomLevel","SpecialZoomLevel$1","extendStatics","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","__assign","assign","t","s","i","arguments","length","apply","createStore","initialState","state","listeners","subscribe","key","concat","unsubscribe","filter","f","update","data","ThemeContext","currentTheme","setCurrentTheme","isDarkMode","matchMedia","matches","ThemeProvider","theme","initialTheme","useMemo","media","initialContext","LayerRenderStatus","LayerRenderStatus$1","usePrevious","AnnotationBorderStyleType","AnnotationBorderStyleType$1","dateRegex","RegExp","parse$1","min","max","defaultValue","parsed","parseInt","convertDate","input","exec","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","Date","UTC","PopupWrapper","annotation","dateStr","modificationDate","date","toLocaleDateString","toLocaleTimeString","containerEle","annotationEle","querySelector","id","ele","zIndex","annotationType","Popup","title","contents","split","map","item","index","TogglePopupBy","useTogglePopup","Hover","togglePopupBy","setTooglePopupBy","toggleOnClick","Click","openOnHover","closeOnHover","Annotation","ignoreBorder","hasPopup","isRenderable","page","viewport","rect","normalizeRect","bound","view","styles","borderColor","borderRadius","borderStyle","borderWidth","Dashed","Solid","Underline","borderBottomStyle","Beveled","Inset","horizontalCornerRadius","verticalCornerRadius","color","popup","slot","attrs","transform","transformOrigin","Caret","Circle","preserveAspectRatio","version","fill","rx","ry","stroke","strokeWidth","fileName","url","str","pop","downloadFile","blobUrl","URL","createObjectURL","Blob","link","display","href","setAttribute","appendChild","click","removeChild","revokeObjectURL","FileAttachment","doubleClick","file","filename","onDoubleClick","FreeText","ignoredParents","parentType","indexOf","parentId","parent","parseFloat","Highlight","childAnnotation","hasQuadPoints","quadPoints","annotations","quadPoint","x","y","ann","Ink","inkLists","inkList","points","Line","x1","lineCoordinates","x2","y1","y2","parse","pageIndex","destArray","bottomOffset","scale","name","scaleTo","PageFit","PageWidth","getDestination","doc","dest","Promise","res","resolve","then","getPageIndex","Link","onExecuteNamedAction","onJumpToDest","preventDefault","action","rel","newWindow","Polygon","vertices","Polyline","Square","Squiggly","Stamp","StrikeOut","CommentIcon","HelpIcon","KeyIcon","NoteIcon","ParagraphIcon","TriangleIcon","Text","toLowerCase","AnnotationLayerBody","plugins","rotation","getViewport","clonedViewPort","clone","dontFlip","filterAnnotations","plugin","onAnnotationLayerRender","find","AnnotationLoader","renderAnnotations","loading","setStatus","getAnnotations","intent","AnnotationLayer","WithScale","callback","CanvasLayer","canvasRef","renderTask","rendered","setRendered","devicePixelRatio","renderCanvas","task","cancel","canvasEle","onCanvasLayerRender","PreRender","opacity","canvasContext","getContext","alpha","render","promise","removeProperty","DidRender","SvgLayer","empty","innerHTML","renderSvg","getOperatorList","operatorList","graphic","SVGGraphics","commonObjs","objs","getSVG","svg","TextLayer","spans","querySelectorAll","numSpans","span","renderText","onTextLayerRender","getTextContent","textContent","renderTextLayer","enhanceTextSelection","childNodes","classList","add","NUMBER_OF_OVERSCAN_PAGES","PageLayer","currentPage","renderPage","onPageVisibilityChanged","pageHeight","pageWidth","viewportRotation","pageSize","setPageSize","prevIsCalculated","intersectionThreshold","_","scaledWidth","scaledHeight","isVertical","abs","w","h","determinePageSize","getPage","pdfPage","visibilityChanged","params","defaultPageRenderer","canvasLayer","textLayer","annotationLayer","renderPageLayer","rotationNumber","svgLayer","idx","getFileExt","SCROLL_BAR_WIDTH","PAGE_PADDING","calculateScale","ActualSize","clientWidth","Inner","initialPage","viewerState","onDocumentLoad","onOpenFile","onPageChange","onZoom","pagesRef","setCurrentPage","setRotation","stateRef","setScale","numPages","arr","pageVisibility","pageRefs","setViewerState","newState","onViewerStateChange","getPagesContainer","getPageElement","getViewerState","jumpToDestination","leftOffset","pagesContainer","currentState","newPageIndex","bottom","updateScale","zoom","targetPageEle","scrollTop","offsetTop","scrollLeft","offsetLeft","jumpToPage","targetPage","openFile","reader","FileReader","readAsArrayBuffer","onload","bytes","Uint8Array","rotate","updateRotation","newScale","pagesEle","getPluginMethods","pluginMethods","install","uninstall","pageVisibilityChanged","maxRatioPage","reduce","maxIndex","array","executeNamedAction","previousPage","nextPage","renderViewer","subSlot","renderSlot","LEVELS","decrease","currentLevel","found","findIndex","PageSizeCalculator","defaultScale","scaled","useIsMounted","isMountedRef","LoadingStatus","AskForPasswordState","_super","verifyPasswordFn","_this","AskingPassword","useContext","password","setPassword","CompletedState","FailureState","error","LoadingState","percentages","WrongPassword","WrongPasswordState","DocumentLoader","characterMap","httpHeaders","renderError","renderLoader","transformGetDocumentParams","withCredentials","setPercentages","loadedDocument","setLoadedDocument","isMounted","worker","PDFWorker","now","cMapUrl","cMapPacked","isCompressed","transformParams","loadingTask","getDocument","onPassword","verifyPassword","reason","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","onProgress","total","loaded","err","destroyed","message","destroy","isSameUrl","a","typeA","typeB","every","v","Viewer","fileUrl","_f","_g","_h","_j","_k","shouldLoad","setFile","_l","visible","setVisible","prevFile","currentFile","themeContext","ps","Worker","workerUrl","GlobalWorkerOptions","workerSrc"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar PdfJs = require('pdfjs-dist');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () {\n                        return e[k];\n                    }\n                });\n            }\n        });\n    }\n    n['default'] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\nvar PdfJs__namespace = /*#__PURE__*/_interopNamespace(PdfJs);\n\nvar AnnotationType;\n(function (AnnotationType) {\n    AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n    AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n    AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n    AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n    AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n    AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n    AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n    AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n    AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n    AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n    AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n    AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n    AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n    AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n    AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n    AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n    AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(AnnotationType || (AnnotationType = {}));\nvar AnnotationType$1 = AnnotationType;\n\nvar Button = function (_a) {\n    var children = _a.children, onClick = _a.onClick;\n    return (React__namespace.createElement(\"button\", { className: \"rpv-core__button\", onClick: onClick }, children));\n};\n\nvar Menu = function (_a) {\n    var children = _a.children;\n    return React__namespace.createElement(\"ul\", { className: \"rpv-core__menu\" }, children);\n};\n\nvar MenuDivider = function () { return React__namespace.createElement(\"li\", { className: \"rpv-core__menu-divider\" }); };\n\nvar Icon = function (_a) {\n    var children = _a.children, _b = _a.size, size = _b === void 0 ? 24 : _b;\n    var width = (size || 24) + \"px\";\n    return (React__namespace.createElement(\"svg\", { className: \"rpv-core__icon\", height: width, viewBox: \"0 0 24 24\", width: width }, children));\n};\n\nvar CheckIcon = function () {\n    return (React__namespace.createElement(Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M23.5,0.499l-16.5,23l-6.5-6.5\" })));\n};\n\nvar classNames = function (classes) {\n    var result = [];\n    Object.keys(classes).forEach(function (clazz) {\n        if (clazz && classes[clazz]) {\n            result.push(clazz);\n        }\n    });\n    return result.join(' ');\n};\n\nvar MenuItem = function (_a) {\n    var _b = _a.checked, checked = _b === void 0 ? false : _b, children = _a.children, _c = _a.icon, icon = _c === void 0 ? null : _c, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, onClick = _a.onClick;\n    return (React__namespace.createElement(\"li\", { className: classNames({\n            'rpv-core__menu-item': true,\n            'rpv-core__menu-item--disabled': isDisabled,\n        }), onClick: onClick },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__menu-item-icon\" }, icon),\n        React__namespace.createElement(\"div\", { className: \"rpv-core__menu-item-label\" }, children),\n        React__namespace.createElement(\"div\", { className: \"rpv-core__menu-item-check\" }, checked && React__namespace.createElement(CheckIcon, null))));\n};\n\nvar MinimalButton = function (_a) {\n    var children = _a.children, _b = _a.isDisabled, isDisabled = _b === void 0 ? false : _b, _c = _a.isSelected, isSelected = _c === void 0 ? false : _c, onClick = _a.onClick;\n    return (React__namespace.createElement(\"button\", { className: classNames({\n            'rpv-core__minimal-button': true,\n            'rpv-core__minimal-button--disabled': isDisabled,\n            'rpv-core__minimal-button--selected': isSelected,\n        }), onClick: onClick }, children));\n};\n\nvar PrimaryButton = function (_a) {\n    var children = _a.children, onClick = _a.onClick;\n    return (React__namespace.createElement(\"button\", { className: \"rpv-core__primary-button\", onClick: onClick }, children));\n};\n\nvar ProgressBar = function (_a) {\n    var progress = _a.progress;\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__progress-bar\" },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__progress-bar-progress\", style: { width: progress + \"%\" } },\n            progress,\n            \"%\")));\n};\n\nvar Separator = function () { return React__namespace.createElement(\"div\", { className: \"rpv-core__separator\" }); };\n\nvar Spinner = function () { return (React__namespace.createElement(\"svg\", { className: \"rpv-core__spinner\", width: \"64px\", height: \"64px\", viewBox: \"0 0 32 32\" },\n    React__namespace.createElement(\"circle\", { className: \"rpv-core__spinner-circle\", cx: \"16\", cy: \"16\", r: \"12\", strokeDasharray: Math.PI * 2 * 9 }))); };\n\nvar TextBox = function (_a) {\n    var _b = _a.placeholder, placeholder = _b === void 0 ? '' : _b, _c = _a.type, type = _c === void 0 ? 'text' : _c, _d = _a.value, value = _d === void 0 ? '' : _d, onChange = _a.onChange, _e = _a.onKeyDown, onKeyDown = _e === void 0 ? function () { } : _e;\n    return (React__namespace.createElement(\"input\", { className: \"rpv-core__textbox\", placeholder: placeholder, type: type, value: value, onChange: function (e) { return onChange(e.target.value); }, onKeyDown: onKeyDown }));\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar useIntersectionObserver = function (props) {\n    var containerRef = React__namespace.useRef(null);\n    var threshold = props.threshold, onVisibilityChanged = props.onVisibilityChanged;\n    useIsomorphicLayoutEffect(function () {\n        var io = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var isVisible = entry.isIntersecting;\n                var ratio = entry.intersectionRatio;\n                onVisibilityChanged({ isVisible: isVisible, ratio: ratio });\n            });\n        }, {\n            threshold: threshold || 0,\n        });\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        io.observe(container);\n        return function () {\n            io.unobserve(container);\n        };\n    }, []);\n    return containerRef;\n};\n\nvar LocalizationContext = React__namespace.createContext({});\n\nvar core = {\n\taskingPassword: {\n\t\trequirePasswordToOpen: \"This document requires a password to open\",\n\t\tsubmit: \"Submit\"\n\t},\n\twrongPassword: {\n\t\tsubmit: \"Submit\",\n\t\ttryAgain: \"The password is wrong. Please try again\"\n\t}\n};\nvar enUs = {\n\tcore: core\n};\n\nvar LocalizationProvider = function (_a) {\n    var children = _a.children, localization = _a.localization;\n    var defaultL10n = enUs;\n    var _b = React__namespace.useState(localization || defaultL10n), l10nData = _b[0], setL10nData = _b[1];\n    var setLocalization = function (l10n) { return setL10nData(l10n); };\n    return React__namespace.createElement(LocalizationContext.Provider, { value: l10nData }, children(setLocalization));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n    var clickHandler = function (e) {\n        var target = targetRef.current;\n        if (target && !target.contains(e.target)) {\n            onClickOutside();\n        }\n    };\n    React__namespace.useEffect(function () {\n        if (!closeOnClickOutside) {\n            return;\n        }\n        document.addEventListener('click', clickHandler);\n        return function () {\n            document.removeEventListener('click', clickHandler);\n        };\n    }, []);\n};\n\nvar useKeyUp = function (targetKeyCode, handler) {\n    var keyUpHandler = function (e) {\n        e.keyCode === targetKeyCode && handler();\n    };\n    React__namespace.useEffect(function () {\n        document.addEventListener('keyup', keyUpHandler);\n        return function () {\n            document.removeEventListener('keyup', keyUpHandler);\n        };\n    }, []);\n};\n\nvar useLockScroll = function () {\n    React__namespace.useEffect(function () {\n        var originalStyle = window.getComputedStyle(document.body).overflow;\n        document.body.style.overflow = 'hidden';\n        return function () {\n            document.body.style.overflow = originalStyle;\n        };\n    }, []);\n};\n\nvar ModalBody = function (_a) {\n    var children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, onToggle = _a.onToggle;\n    var contentRef = React__namespace.useRef();\n    useLockScroll();\n    useKeyUp(27, function () { return closeOnEscape && onToggle(); });\n    useClickOutside(closeOnClickOutside, contentRef, onToggle);\n    useIsomorphicLayoutEffect(function () {\n        var contentEle = contentRef.current;\n        if (!contentEle) {\n            return;\n        }\n        var maxHeight = document.body.clientHeight * 0.75;\n        if (contentEle.getBoundingClientRect().height >= maxHeight) {\n            contentEle.style.overflow = 'auto';\n            contentEle.style.maxHeight = maxHeight + \"px\";\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__modal-body\", ref: contentRef }, children));\n};\n\nvar ModalOverlay = function (_a) {\n    var children = _a.children;\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__modal-overlay\" }, children));\n};\n\nvar ToggleStatus;\n(function (ToggleStatus) {\n    ToggleStatus[\"Close\"] = \"Close\";\n    ToggleStatus[\"Open\"] = \"Open\";\n    ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(ToggleStatus || (ToggleStatus = {}));\nvar useToggle = function () {\n    var _a = React__namespace.useState(false), opened = _a[0], setOpened = _a[1];\n    var toggle = function (status) {\n        switch (status) {\n            case ToggleStatus.Close:\n                setOpened(false);\n                break;\n            case ToggleStatus.Open:\n                setOpened(true);\n                break;\n            case ToggleStatus.Toggle:\n            default:\n                setOpened(function (isOpened) { return !isOpened; });\n                break;\n        }\n    };\n    return { opened: opened, toggle: toggle };\n};\n\nvar Portal = function (_a) {\n    var content = _a.content, target = _a.target;\n    var _b = useToggle(), opened = _b.opened, toggle = _b.toggle;\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        target(toggle, opened),\n        opened && content(toggle)));\n};\n\nvar Modal = function (_a) {\n    var closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, target = _a.target;\n    var renderContent = function (toggle) { return (React__namespace.createElement(ModalOverlay, null,\n        React__namespace.createElement(ModalBody, { closeOnClickOutside: closeOnClickOutside, closeOnEscape: closeOnEscape, onToggle: toggle }, content(toggle)))); };\n    return React__namespace.createElement(Portal, { target: target, content: renderContent });\n};\n\nvar Position;\n(function (Position) {\n    Position[\"TopLeft\"] = \"TOP_LEFT\";\n    Position[\"TopCenter\"] = \"TOP_CENTER\";\n    Position[\"TopRight\"] = \"TOP_RIGHT\";\n    Position[\"RightTop\"] = \"RIGHT_TOP\";\n    Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n    Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n    Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n    Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n    Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n    Position[\"LeftTop\"] = \"LEFT_TOP\";\n    Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n    Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(Position || (Position = {}));\nvar Position$1 = Position;\n\nvar calculatePosition = function (content, target, position, offset) {\n    var targetRect = target.getBoundingClientRect();\n    var contentRect = content.getBoundingClientRect();\n    var height = contentRect.height, width = contentRect.width;\n    var top = 0;\n    var left = 0;\n    switch (position) {\n        case Position$1.TopLeft:\n            top = targetRect.top - height;\n            left = targetRect.left;\n            break;\n        case Position$1.TopCenter:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case Position$1.TopRight:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case Position$1.RightTop:\n            top = targetRect.top;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.RightCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.RightBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.BottomLeft:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left;\n            break;\n        case Position$1.BottomCenter:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case Position$1.BottomRight:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case Position$1.LeftTop:\n            top = targetRect.top;\n            left = targetRect.left - width;\n            break;\n        case Position$1.LeftCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left - width;\n            break;\n        case Position$1.LeftBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left - width;\n            break;\n    }\n    return {\n        left: left + (offset.left || 0),\n        top: top + (offset.top || 0),\n    };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n    useIsomorphicLayoutEffect(function () {\n        var targetEle = targetRef.current;\n        var contentEle = contentRef.current;\n        var anchorEle = anchorRef.current;\n        if (!contentEle || !targetEle || !anchorEle) {\n            return;\n        }\n        var anchorRect = anchorEle.getBoundingClientRect();\n        var _a = calculatePosition(contentEle, targetEle, position, offset), top = _a.top, left = _a.left;\n        contentEle.style.top = top - anchorRect.top + \"px\";\n        contentEle.style.left = left - anchorRect.left + \"px\";\n    }, []);\n};\n\nvar Arrow = function (_a) {\n    var _b;\n    var customClassName = _a.customClassName, position = _a.position;\n    return (React__namespace.createElement(\"div\", { className: classNames((_b = {\n                'rpv-core__arrow': true,\n                'rpv-core__arrow--tl': position === Position$1.TopLeft,\n                'rpv-core__arrow--tc': position === Position$1.TopCenter,\n                'rpv-core__arrow--tr': position === Position$1.TopRight,\n                'rpv-core__arrow--rt': position === Position$1.RightTop,\n                'rpv-core__arrow--rc': position === Position$1.RightCenter,\n                'rpv-core__arrow--rb': position === Position$1.RightBottom,\n                'rpv-core__arrow--bl': position === Position$1.BottomLeft,\n                'rpv-core__arrow--bc': position === Position$1.BottomCenter,\n                'rpv-core__arrow--br': position === Position$1.BottomRight,\n                'rpv-core__arrow--lt': position === Position$1.LeftTop,\n                'rpv-core__arrow--lc': position === Position$1.LeftCenter,\n                'rpv-core__arrow--lb': position === Position$1.LeftBottom\n            },\n            _b[\"\" + customClassName] = customClassName !== '',\n            _b)) }));\n};\n\nvar PopoverBody = function (_a) {\n    var children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, offset = _a.offset, position = _a.position, targetRef = _a.targetRef, onClose = _a.onClose;\n    var contentRef = React__namespace.useRef();\n    var innerRef = React__namespace.useRef();\n    var anchorRef = React__namespace.useRef();\n    useClickOutside(closeOnClickOutside, contentRef, onClose);\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    useIsomorphicLayoutEffect(function () {\n        var innerContentEle = innerRef.current;\n        if (!innerContentEle) {\n            return;\n        }\n        var maxHeight = document.body.clientHeight * 0.75;\n        if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n            innerContentEle.style.overflow = 'auto';\n            innerContentEle.style.maxHeight = maxHeight + \"px\";\n        }\n    }, []);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__namespace.createElement(\"div\", { className: \"rpv-core__popover-body\", ref: contentRef },\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__popover-body-arrow\", position: position }),\n            React__namespace.createElement(\"div\", { ref: innerRef }, children))));\n};\n\nvar PopoverOverlay = function (_a) {\n    var closeOnEscape = _a.closeOnEscape, onClose = _a.onClose;\n    useKeyUp(27, function () { return closeOnEscape && onClose(); });\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__popover-overlay\" });\n};\n\nvar Popover = function (_a) {\n    var closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var targetRef = React__namespace.useRef();\n    var renderTarget = function (toggle, opened) { return (React__namespace.createElement(\"div\", { ref: targetRef }, target(toggle, opened))); };\n    var renderContent = function (toggle) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(PopoverOverlay, { closeOnEscape: closeOnEscape, onClose: toggle }),\n        React__namespace.createElement(PopoverBody, { closeOnClickOutside: closeOnClickOutside, offset: offset, position: position, targetRef: targetRef, onClose: toggle }, content(toggle)))); };\n    return React__namespace.createElement(Portal, { content: renderContent, target: renderTarget });\n};\n\nvar TooltipBody = function (_a) {\n    var children = _a.children, offset = _a.offset, position = _a.position, targetRef = _a.targetRef;\n    var contentRef = React__namespace.useRef();\n    var anchorRef = React__namespace.useRef();\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__namespace.createElement(\"div\", { className: \"rpv-core__tooltip-body\", ref: contentRef },\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__tooltip-body-arrow\", position: position }),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__tooltip-body-content\" }, children))));\n};\n\nvar Tooltip = function (_a) {\n    var content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var targetRef = React__namespace.useRef();\n    var renderTarget = function (toggle) {\n        var show = function () {\n            toggle(ToggleStatus.Open);\n        };\n        var hide = function () {\n            toggle(ToggleStatus.Close);\n        };\n        return (React__namespace.createElement(\"div\", { ref: targetRef, onMouseEnter: show, onMouseLeave: hide }, target));\n    };\n    var renderContent = function () { return (React__namespace.createElement(TooltipBody, { offset: offset, position: position, targetRef: targetRef }, content())); };\n    return React__namespace.createElement(Portal, { target: renderTarget, content: renderContent });\n};\n\nvar SpecialZoomLevel;\n(function (SpecialZoomLevel) {\n    SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n    SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n    SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(SpecialZoomLevel || (SpecialZoomLevel = {}));\nvar SpecialZoomLevel$1 = SpecialZoomLevel;\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction createStore(initialState) {\n    var state = initialState || {};\n    var listeners = {};\n    return {\n        subscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).concat(handler);\n        },\n        unsubscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).filter(function (f) { return f !== handler; });\n        },\n        update: function (key, data) {\n            var _a;\n            state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n            (listeners[key] || []).forEach(function (handler) { return handler(state[key]); });\n        },\n        get: function (key) {\n            return state[key];\n        },\n    };\n}\n\nvar ThemeContext = React__namespace.createContext({\n    currentTheme: 'light',\n    setCurrentTheme: function () { },\n});\n\nvar isDarkMode = function () {\n    return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar ThemeProvider = function (_a) {\n    var children = _a.children, theme = _a.theme;\n    var initialTheme = React__namespace.useMemo(function () { return (theme === 'auto' ? (isDarkMode() ? 'dark' : 'light') : theme); }, []);\n    var _b = React__namespace.useState(initialTheme), currentTheme = _b[0], setCurrentTheme = _b[1];\n    React__namespace.useEffect(function () {\n        if (theme !== 'auto') {\n            return;\n        }\n        var media = window.matchMedia('(prefers-color-scheme: dark)');\n        var handler = function (e) {\n            setCurrentTheme(e.matches ? 'dark' : 'light');\n        };\n        media.addEventListener('change', handler);\n        return function () { return media.removeEventListener('change', handler); };\n    }, []);\n    var initialContext = {\n        currentTheme: currentTheme,\n        setCurrentTheme: setCurrentTheme,\n    };\n    return React__namespace.createElement(ThemeContext.Provider, { value: initialContext }, children);\n};\n\nvar LayerRenderStatus;\n(function (LayerRenderStatus) {\n    LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n    LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(LayerRenderStatus || (LayerRenderStatus = {}));\nvar LayerRenderStatus$1 = LayerRenderStatus;\n\nfunction usePrevious(value) {\n    var ref = React__namespace.useRef(value);\n    React__namespace.useEffect(function () {\n        ref.current = value;\n    }, [value]);\n    return ref.current;\n}\n\nvar AnnotationBorderStyleType;\n(function (AnnotationBorderStyleType) {\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\nvar AnnotationBorderStyleType$1 = AnnotationBorderStyleType;\n\nvar dateRegex = new RegExp('^D:' +\n    '(\\\\d{4})' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '([Z|+|-])?' +\n    '(\\\\d{2})?' +\n    \"'?\" +\n    '(\\\\d{2})?' +\n    \"'?\");\nvar parse$1 = function (value, min, max, defaultValue) {\n    var parsed = parseInt(value, 10);\n    return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\nvar convertDate = function (input) {\n    var matches = dateRegex.exec(input);\n    if (!matches) {\n        return null;\n    }\n    var year = parseInt(matches[1], 10);\n    var month = parse$1(matches[2], 1, 12, 1) - 1;\n    var day = parse$1(matches[3], 1, 31, 1);\n    var hour = parse$1(matches[4], 0, 23, 0);\n    var minute = parse$1(matches[5], 0, 59, 0);\n    var second = parse$1(matches[6], 0, 59, 0);\n    var universalTimeRelation = matches[7] || 'Z';\n    var offsetHour = parse$1(matches[8], 0, 23, 0);\n    var offsetMinute = parse$1(matches[9], 0, 59, 0);\n    switch (universalTimeRelation) {\n        case '-':\n            hour += offsetHour;\n            minute += offsetMinute;\n            break;\n        case '+':\n            hour -= offsetHour;\n            minute -= offsetMinute;\n            break;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n    var annotation = _a.annotation;\n    var containerRef = React__namespace.useRef();\n    var dateStr = '';\n    if (annotation.modificationDate) {\n        var date = convertDate(annotation.modificationDate);\n        dateStr = date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n    }\n    React__namespace.useLayoutEffect(function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.id + \"\\\"]\");\n        if (!annotationEle) {\n            return;\n        }\n        var ele = annotationEle;\n        ele.style.zIndex += 1;\n        return function () {\n            ele.style.zIndex = \"\" + (parseInt(ele.style.zIndex, 10) - 1);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__annotation-popup-wrapper\", style: {\n            top: annotation.annotationType === AnnotationType$1.Popup ? '' : '100%',\n        } },\n        annotation.title && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-header\" },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-title\" }, annotation.title),\n            React__namespace.createElement(\"span\", { className: \"rpv-core__annotation-popup-date\" }, dateStr))),\n        annotation.contents && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-content\" }, annotation.contents.split('\\n').map(function (item, index) { return (React__namespace.createElement(React__namespace.Fragment, { key: index },\n            item,\n            React__namespace.createElement(\"br\", null))); })))));\n};\n\nvar TogglePopupBy;\n(function (TogglePopupBy) {\n    TogglePopupBy[\"Click\"] = \"Click\";\n    TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\nvar useTogglePopup = function () {\n    var _a = useToggle(), opened = _a.opened, toggle = _a.toggle;\n    var _b = React__namespace.useState(TogglePopupBy.Hover), togglePopupBy = _b[0], setTooglePopupBy = _b[1];\n    var toggleOnClick = function () {\n        switch (togglePopupBy) {\n            case TogglePopupBy.Click:\n                opened && setTooglePopupBy(TogglePopupBy.Hover);\n                toggle(ToggleStatus.Toggle);\n                break;\n            case TogglePopupBy.Hover:\n                setTooglePopupBy(TogglePopupBy.Click);\n                toggle(ToggleStatus.Open);\n                break;\n        }\n    };\n    var openOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Open);\n    };\n    var closeOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Close);\n    };\n    return {\n        opened: opened,\n        closeOnHover: closeOnHover,\n        openOnHover: openOnHover,\n        toggleOnClick: toggleOnClick,\n    };\n};\n\nvar Annotation = function (_a) {\n    var annotation = _a.annotation, children = _a.children, ignoreBorder = _a.ignoreBorder, hasPopup = _a.hasPopup, isRenderable = _a.isRenderable, page = _a.page, viewport = _a.viewport;\n    var rect = annotation.rect;\n    var _b = useTogglePopup(), closeOnHover = _b.closeOnHover, opened = _b.opened, openOnHover = _b.openOnHover, toggleOnClick = _b.toggleOnClick;\n    var normalizeRect = function (r) { return [\n        Math.min(r[0], r[2]),\n        Math.min(r[1], r[3]),\n        Math.max(r[0], r[2]),\n        Math.max(r[1], r[3]),\n    ]; };\n    var bound = normalizeRect([\n        rect[0],\n        page.view[3] + page.view[1] - rect[1],\n        rect[2],\n        page.view[3] + page.view[1] - rect[3],\n    ]);\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var styles = {\n        borderColor: '',\n        borderRadius: '',\n        borderStyle: '',\n        borderWidth: '',\n    };\n    if (!ignoreBorder && annotation.borderStyle.width > 0) {\n        switch (annotation.borderStyle.style) {\n            case AnnotationBorderStyleType$1.Dashed:\n                styles.borderStyle = 'dashed';\n                break;\n            case AnnotationBorderStyleType$1.Solid:\n                styles.borderStyle = 'solid';\n                break;\n            case AnnotationBorderStyleType$1.Underline:\n                styles = Object.assign({\n                    borderBottomStyle: 'solid',\n                }, styles);\n                break;\n            case AnnotationBorderStyleType$1.Beveled:\n            case AnnotationBorderStyleType$1.Inset:\n        }\n        var borderWidth = annotation.borderStyle.width;\n        styles.borderWidth = borderWidth + \"px\";\n        if (annotation.borderStyle.style !== AnnotationBorderStyleType$1.Underline) {\n            width = width - 2 * borderWidth;\n            height = height - 2 * borderWidth;\n        }\n        var _c = annotation.borderStyle, horizontalCornerRadius = _c.horizontalCornerRadius, verticalCornerRadius = _c.verticalCornerRadius;\n        if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n            styles.borderRadius = horizontalCornerRadius + \"px / \" + verticalCornerRadius + \"px\";\n        }\n        annotation.color\n            ? (styles.borderColor = \"rgb(\" + (annotation.color[0] | 0) + \", \" + (annotation.color[1] | 0) + \", \" + (annotation.color[2] | 0) + \")\")\n            :\n                (styles.borderWidth = '0');\n    }\n    return (React__namespace.createElement(React__namespace.Fragment, null, isRenderable &&\n        children({\n            popup: {\n                opened: opened,\n                closeOnHover: closeOnHover,\n                openOnHover: openOnHover,\n                toggleOnClick: toggleOnClick,\n            },\n            slot: {\n                attrs: {\n                    style: Object.assign({\n                        height: height + \"px\",\n                        left: bound[0] + \"px\",\n                        top: bound[1] + \"px\",\n                        transform: \"matrix(\" + viewport.transform.join(',') + \")\",\n                        transformOrigin: \"-\" + bound[0] + \"px -\" + bound[1] + \"px\",\n                        width: width + \"px\",\n                    }, styles),\n                },\n                children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, { annotation: annotation })),\n            },\n        })));\n};\n\nvar Caret = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--caret\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Circle = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--circle\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__namespace.createElement(\"circle\", { cy: height / 2, fill: \"none\", rx: width / 2 - borderWidth / 2, ry: height / 2 - borderWidth / 2, stroke: \"transparent\", strokeWidth: borderWidth || 1 })),\n        props.slot.children)); }));\n};\n\nvar fileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', fileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar FileAttachment = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n    var doubleClick = function () {\n        var file = annotation.file;\n        file && downloadFile(file.filename, file.content);\n    };\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: true, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--file-attachment\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onDoubleClick: doubleClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar FreeText = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--free-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Popup = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var isRenderable = !!(annotation.title || annotation.contents);\n    var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n    var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n    useIsomorphicLayoutEffect(function () {\n        if (!annotation.parentId) {\n            return;\n        }\n        var parent = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.parentId + \"\\\"]\");\n        var container = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.id + \"\\\"]\");\n        if (!parent || !container) {\n            return;\n        }\n        var left = parseFloat(parent.style.left);\n        var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n        container.style.left = left + \"px\";\n        container.style.top = top + \"px\";\n        container.style.transformOrigin = \"-\" + left + \"px -\" + top + \"px\";\n    }, []);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--popup\", \"data-annotation-id\": annotation.id }),\n        React__namespace.createElement(PopupWrapper, { annotation: annotation }))); }));\n};\n\nvar Highlight = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n    if (hasQuadPoints) {\n        var annotations = annotation.quadPoints.map(function (quadPoint) {\n            return Object.assign({}, annotation, {\n                rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n                quadPoints: [],\n            });\n        });\n        return (React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) { return (React__namespace.createElement(Highlight, { key: index, annotation: ann, childAnnotation: childAnnotation, page: page, viewport: viewport })); })));\n    }\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--highlight\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children),\n        childAnnotation &&\n            childAnnotation.annotationType === AnnotationType$1.Popup &&\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\n};\n\nvar Ink = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--ink\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.inkLists && annotation.inkLists.length && (React__namespace.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" }, annotation.inkLists.map(function (inkList, index) { return (React__namespace.createElement(\"polyline\", { key: index, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: inkList.map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); }).join(' ') })); }))),\n        props.slot.children)); }));\n};\n\nvar Line = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--line\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__namespace.createElement(\"line\", { stroke: \"transparent\", strokeWidth: borderWidth || 1, x1: rect[2] - annotation.lineCoordinates[0], x2: rect[2] - annotation.lineCoordinates[2], y1: rect[3] - annotation.lineCoordinates[1], y2: rect[3] - annotation.lineCoordinates[3] })),\n        props.slot.children)); }));\n};\n\nvar parse = function (pageIndex, destArray) {\n    var bottomOffset;\n    var scale;\n    switch (destArray[1].name) {\n        case 'XYZ':\n            bottomOffset = destArray[3];\n            scale = destArray[4];\n            return {\n                bottomOffset: bottomOffset,\n                pageIndex: pageIndex - 1,\n                scaleTo: scale,\n            };\n        case 'Fit':\n        case 'FitB':\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: SpecialZoomLevel$1.PageFit,\n            };\n        case 'FitH':\n        case 'FitBH':\n            return {\n                bottomOffset: destArray[2],\n                pageIndex: pageIndex - 1,\n                scaleTo: SpecialZoomLevel$1.PageWidth,\n            };\n        default:\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: 1,\n            };\n    }\n};\nvar getDestination = function (doc, dest) {\n    return new Promise(function (res) {\n        new Promise(function (resolve) {\n            if (typeof dest === 'string') {\n                doc.getDestination(dest).then(function (destArray) {\n                    resolve(destArray);\n                });\n            }\n            else {\n                resolve(dest);\n            }\n        })\n            .then(function (destArray) {\n            return 'object' === typeof destArray[0]\n                ? doc.getPageIndex(destArray[0]).then(function (pageIndex) { return Promise.resolve({ pageIndex: pageIndex, destArray: destArray }); })\n                : Promise.resolve({\n                    pageIndex: destArray[0],\n                    destArray: destArray,\n                });\n        })\n            .then(function (_a) {\n            var pageIndex = _a.pageIndex, destArray = _a.destArray;\n            var target = parse(pageIndex, destArray);\n            res(target);\n        });\n    });\n};\n\nvar Link = function (_a) {\n    var annotation = _a.annotation, doc = _a.doc, page = _a.page, viewport = _a.viewport, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var link = function (e) {\n        e.preventDefault();\n        annotation.action\n            ? onExecuteNamedAction(annotation.action)\n            : getDestination(doc, annotation.dest).then(function (target) {\n                var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, scaleTo = target.scaleTo;\n                onJumpToDest(bottomOffset ? pageIndex + 1 : pageIndex, bottomOffset, 0, scaleTo);\n            });\n    };\n    var isRenderable = !!(annotation.url || annotation.dest || annotation.action);\n    var attrs = annotation.url\n        ? {\n            href: annotation.url,\n            rel: 'noopener noreferrer nofollow',\n            target: annotation.newWindow ? '_blank' : '',\n            title: annotation.url,\n        }\n        : {\n            href: '',\n            onClick: link,\n        };\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: false, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--link\", \"data-annotation-id\": annotation.id }),\n        React__namespace.createElement(\"a\", __assign({}, attrs)))); }));\n};\n\nvar Polygon = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polygon\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__namespace.createElement(\"polygon\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\n                    .map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); })\n                    .join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Polyline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polyline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__namespace.createElement(\"polyline\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\n                    .map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); })\n                    .join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Square = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--square\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__namespace.createElement(\"rect\", { height: height - borderWidth, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, x: borderWidth / 2, y: borderWidth / 2, width: width - borderWidth })),\n        props.slot.children)); }));\n};\n\nvar Squiggly = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--squiggly\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Stamp = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--stamp\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar StrikeOut = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--strike-out\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar CommentIcon = function () {\n    return (React__namespace.createElement(Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\" }),\n        React__namespace.createElement(\"path\", { d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\" }),\n        React__namespace.createElement(\"path\", { d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\" }),\n        React__namespace.createElement(\"path\", { d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\" })));\n};\n\nvar HelpIcon = function () {\n    return (React__namespace.createElement(Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\" }),\n        React__namespace.createElement(\"path\", { d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\" }),\n        React__namespace.createElement(\"path\", { d: \"M21.423 5.406L17.415 9.414\" }),\n        React__namespace.createElement(\"path\", { d: \"M14.587 6.585L18.607 2.565\" }),\n        React__namespace.createElement(\"path\", { d: \"M5.405 21.424L9.413 17.416\" }),\n        React__namespace.createElement(\"path\", { d: \"M6.585 14.588L2.577 18.596\" }),\n        React__namespace.createElement(\"path\", { d: \"M18.602 21.419L14.595 17.412\" }),\n        React__namespace.createElement(\"path\", { d: \"M17.419 14.58L21.428 18.589\" }),\n        React__namespace.createElement(\"path\", { d: \"M2.582 5.399L6.588 9.406\" }),\n        React__namespace.createElement(\"path\", { d: \"M9.421 6.581L5.412 2.572\" })));\n};\n\nvar KeyIcon = function () {\n    return (React__namespace.createElement(Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\" }),\n        React__namespace.createElement(\"path\", { d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\" })));\n};\n\nvar NoteIcon = function () {\n    return (React__namespace.createElement(Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\" }),\n        React__namespace.createElement(\"path\", { d: \"M6 4.5L6 0.5\" }),\n        React__namespace.createElement(\"path\", { d: \"M18 4.5L18 0.5\" }),\n        React__namespace.createElement(\"path\", { d: \"M10 4.5L10 0.5\" }),\n        React__namespace.createElement(\"path\", { d: \"M14 4.5L14 0.5\" })));\n};\n\nvar ParagraphIcon = function () {\n    return (React__namespace.createElement(Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M17.5 0.498L17.5 23.498\" }),\n        React__namespace.createElement(\"path\", { d: \"M10.5 0.498L10.5 23.498\" }),\n        React__namespace.createElement(\"path\", { d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\" })));\n};\n\nvar TriangleIcon = function () {\n    return (React__namespace.createElement(Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\" })));\n};\n\nvar Text = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var name = annotation.name ? annotation.name.toLowerCase() : '';\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n            name && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-text-icon\" },\n                name === 'check' && React__namespace.createElement(CheckIcon, null),\n                name === 'comment' && React__namespace.createElement(CommentIcon, null),\n                name === 'help' && React__namespace.createElement(HelpIcon, null),\n                name === 'insert' && React__namespace.createElement(TriangleIcon, null),\n                name === 'key' && React__namespace.createElement(KeyIcon, null),\n                name === 'note' && React__namespace.createElement(NoteIcon, null),\n                (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null))),\n            props.slot.children),\n        childAnnotation &&\n            childAnnotation.annotationType === AnnotationType$1.Popup &&\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\n};\n\nvar Underline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--underline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar AnnotationLayerBody = function (_a) {\n    var annotations = _a.annotations, containerRef = _a.containerRef, doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var viewport = page.getViewport({ rotation: rotation, scale: scale });\n    var clonedViewPort = viewport.clone({ dontFlip: true });\n    var filterAnnotations = annotations.filter(function (annotation) { return !annotation.parentId; });\n    React__namespace.useEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        plugins.forEach(function (plugin) {\n            if (plugin.onAnnotationLayerRender) {\n                plugin.onAnnotationLayerRender({\n                    annotations: filterAnnotations,\n                    container: container,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                });\n            }\n        });\n    }, []);\n    return (React__namespace.createElement(React__namespace.Fragment, null, filterAnnotations.map(function (annotation) {\n        var childAnnotation = annotations.find(function (item) { return item.parentId === annotation.id; });\n        switch (annotation.annotationType) {\n            case AnnotationType$1.Caret:\n                return (React__namespace.createElement(Caret, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Circle:\n                return (React__namespace.createElement(Circle, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.FileAttachment:\n                return (React__namespace.createElement(FileAttachment, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.FreeText:\n                return (React__namespace.createElement(FreeText, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Highlight:\n                return (React__namespace.createElement(Highlight, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Ink:\n                return (React__namespace.createElement(Ink, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Line:\n                return (React__namespace.createElement(Line, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Link:\n                return (React__namespace.createElement(Link, { key: annotation.id, annotation: annotation, doc: doc, page: page, viewport: clonedViewPort, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\n            case AnnotationType$1.Polygon:\n                return (React__namespace.createElement(Polygon, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Polyline:\n                return (React__namespace.createElement(Polyline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Popup:\n                return (React__namespace.createElement(Popup, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Square:\n                return (React__namespace.createElement(Square, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Squiggly:\n                return (React__namespace.createElement(Squiggly, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Stamp:\n                return (React__namespace.createElement(Stamp, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.StrikeOut:\n                return (React__namespace.createElement(StrikeOut, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Text:\n                return (React__namespace.createElement(Text, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Underline:\n                return (React__namespace.createElement(Underline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            default:\n                return React__namespace.createElement(React__namespace.Fragment, { key: annotation.id });\n        }\n    })));\n};\n\nvar AnnotationLoader = function (_a) {\n    var page = _a.page, renderAnnotations = _a.renderAnnotations;\n    var _b = React__namespace.useState({\n        loading: true,\n        annotations: [],\n    }), status = _b[0], setStatus = _b[1];\n    React__namespace.useEffect(function () {\n        page.getAnnotations({ intent: 'display' }).then(function (result) {\n            setStatus({\n                loading: false,\n                annotations: result,\n            });\n        });\n    }, []);\n    return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n    var doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var containerRef = React__namespace.useRef();\n    var renderAnnotations = function (annotations) {\n        return (React__namespace.createElement(AnnotationLayerBody, { annotations: annotations, containerRef: containerRef, doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotation, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\n    };\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__annotation-layer\" },\n        React__namespace.createElement(AnnotationLoader, { page: page, renderAnnotations: renderAnnotations })));\n};\n\nvar WithScale = function (_a) {\n    var callback = _a.callback, children = _a.children, rotation = _a.rotation, scale = _a.scale;\n    useIsomorphicLayoutEffect(function () {\n        callback();\n    }, [rotation, scale]);\n    return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nvar CanvasLayer = function (_a) {\n    var height = _a.height, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var canvasRef = React__namespace.useRef();\n    var renderTask = React__namespace.useRef();\n    var _b = React__namespace.useState(false), rendered = _b[0], setRendered = _b[1];\n    var devicePixelRatio = window.devicePixelRatio || 1;\n    var renderCanvas = function () {\n        setRendered(false);\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvasEle = canvasRef.current;\n        plugins.forEach(function (plugin) {\n            if (plugin.onCanvasLayerRender) {\n                plugin.onCanvasLayerRender({\n                    ele: canvasEle,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                    status: LayerRenderStatus$1.PreRender,\n                });\n            }\n        });\n        canvasEle.height = height * devicePixelRatio;\n        canvasEle.width = width * devicePixelRatio;\n        canvasEle.style.opacity = '0';\n        var canvasContext = canvasEle.getContext('2d', {\n            alpha: false,\n        });\n        var viewport = page.getViewport({\n            rotation: rotation,\n            scale: scale * devicePixelRatio,\n        });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () {\n            setRendered(true);\n            canvasEle.style.removeProperty('opacity');\n            plugins.forEach(function (plugin) {\n                if (plugin.onCanvasLayerRender) {\n                    plugin.onCanvasLayerRender({\n                        ele: canvasEle,\n                        pageIndex: pageIndex,\n                        rotation: rotation,\n                        scale: scale,\n                        status: LayerRenderStatus$1.DidRender,\n                    });\n                }\n            });\n        }, function () {\n            setRendered(true);\n        });\n    };\n    return (React__namespace.createElement(WithScale, { callback: renderCanvas, rotation: rotation, scale: scale },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__canvas-layer\", style: {\n                height: height + \"px\",\n                width: width + \"px\",\n            } },\n            !rendered && (React__namespace.createElement(\"div\", { className: \"rpv-core__canvas-layer-loader\" },\n                React__namespace.createElement(Spinner, null))),\n            React__namespace.createElement(\"canvas\", { ref: canvasRef, style: {\n                    transform: \"scale(\" + 1 / devicePixelRatio + \")\",\n                    transformOrigin: \"top left\",\n                } }))));\n};\n\nvar SvgLayer = function (_a) {\n    var height = _a.height, page = _a.page, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var containerRef = React__namespace.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.innerHTML = '';\n    };\n    var renderSvg = function () {\n        var containerEle = containerRef.current;\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        page.getOperatorList().then(function (operatorList) {\n            empty();\n            var graphic = new PdfJs__namespace.SVGGraphics(page.commonObjs, page.objs);\n            graphic.getSVG(operatorList, viewport).then(function (svg) {\n                svg.style.height = height + \"px\";\n                svg.style.width = width + \"px\";\n                containerEle.appendChild(svg);\n            });\n        });\n    };\n    return (React__namespace.createElement(WithScale, { callback: renderSvg, rotation: rotation, scale: scale },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__svg-layer\", ref: containerRef })));\n};\n\nvar TextLayer = function (_a) {\n    var page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale;\n    var containerRef = React__namespace.useRef();\n    var renderTask = React__namespace.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var spans = containerEle.querySelectorAll('span.rpv-core__text-layer-text');\n        var numSpans = spans.length;\n        for (var i = 0; i < numSpans; i++) {\n            var span = spans[i];\n            containerEle.removeChild(span);\n        }\n    };\n    var renderText = function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        plugins.forEach(function (plugin) {\n            if (plugin.onTextLayerRender) {\n                plugin.onTextLayerRender({\n                    ele: containerEle,\n                    pageIndex: pageIndex,\n                    scale: scale,\n                    status: LayerRenderStatus$1.PreRender,\n                });\n            }\n        });\n        page.getTextContent().then(function (textContent) {\n            empty();\n            renderTask.current = PdfJs__namespace.renderTextLayer({\n                container: containerEle,\n                textContent: textContent,\n                viewport: viewport,\n                enhanceTextSelection: true,\n            });\n            renderTask.current.promise.then(function () {\n                var spans = containerEle.childNodes;\n                var numSpans = spans.length;\n                for (var i = 0; i < numSpans; i++) {\n                    var span = spans[i];\n                    span.classList.add('rpv-core__text-layer-text');\n                }\n                plugins.forEach(function (plugin) {\n                    if (plugin.onTextLayerRender) {\n                        plugin.onTextLayerRender({\n                            ele: containerEle,\n                            pageIndex: pageIndex,\n                            scale: scale,\n                            status: LayerRenderStatus$1.DidRender,\n                        });\n                    }\n                });\n            }, function () {\n            });\n        });\n    };\n    return (React__namespace.createElement(WithScale, { callback: renderText, rotation: rotation, scale: scale },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__text-layer\", ref: containerRef })));\n};\n\nvar NUMBER_OF_OVERSCAN_PAGES = 2;\nvar PageLayer = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, height = _a.height, pageIndex = _a.pageIndex, plugins = _a.plugins, renderPage = _a.renderPage, rotation = _a.rotation, scale = _a.scale, width = _a.width, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest, onPageVisibilityChanged = _a.onPageVisibilityChanged;\n    var _b = React__namespace.useState({\n        page: null,\n        pageHeight: height,\n        pageWidth: width,\n        viewportRotation: 0,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, pageHeight = pageSize.pageHeight, pageWidth = pageSize.pageWidth;\n    var prevIsCalculated = React__namespace.useRef(false);\n    var intersectionThreshold = Array(10)\n        .fill(null)\n        .map(function (_, i) { return i / 10; });\n    var scaledWidth = pageWidth * scale;\n    var scaledHeight = pageHeight * scale;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    var w = isVertical ? scaledWidth : scaledHeight;\n    var h = isVertical ? scaledHeight : scaledWidth;\n    var determinePageSize = function () {\n        if (prevIsCalculated.current) {\n            return;\n        }\n        prevIsCalculated.current = true;\n        doc.getPage(pageIndex + 1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            setPageSize({\n                page: pdfPage,\n                pageHeight: viewport.height,\n                pageWidth: viewport.width,\n                viewportRotation: viewport.rotation,\n            });\n        });\n    };\n    var visibilityChanged = function (params) {\n        onPageVisibilityChanged(pageIndex, params.isVisible ? params.ratio : -1);\n        if (params.isVisible) {\n            determinePageSize();\n        }\n    };\n    var defaultPageRenderer = function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        props.canvasLayer.children,\n        props.textLayer.children,\n        props.annotationLayer.children)); };\n    var renderPageLayer = renderPage || defaultPageRenderer;\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    var containerRef = useIntersectionObserver({\n        threshold: intersectionThreshold,\n        onVisibilityChanged: visibilityChanged,\n    });\n    React__namespace.useEffect(function () {\n        if (currentPage - NUMBER_OF_OVERSCAN_PAGES <= pageIndex &&\n            pageIndex <= currentPage + NUMBER_OF_OVERSCAN_PAGES) {\n            determinePageSize();\n        }\n    }, [currentPage]);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__page-layer\", \"data-testid\": \"viewer-page-layer-\" + pageIndex, style: {\n            height: h + \"px\",\n            width: w + \"px\",\n        } }, !page ? (React__namespace.createElement(Spinner, null)) : (React__namespace.createElement(React__namespace.Fragment, null,\n        renderPageLayer({\n            annotationLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(AnnotationLayer, { doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest })),\n            },\n            canvasLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(CanvasLayer, { height: h, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale, width: w })),\n            },\n            doc: doc,\n            height: h,\n            pageIndex: pageIndex,\n            rotation: rotation,\n            scale: scale,\n            svgLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(SvgLayer, { height: h, page: page, rotation: rotationNumber, scale: scale, width: w })),\n            },\n            textLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(TextLayer, { page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale })),\n            },\n            width: w,\n        }),\n        plugins.map(function (plugin, idx) {\n            return plugin.renderPageLayer ? (React__namespace.createElement(React__namespace.Fragment, { key: idx }, plugin.renderPageLayer({\n                doc: doc,\n                height: h,\n                pageIndex: pageIndex,\n                rotation: rotation,\n                scale: scale,\n                width: w,\n            }))) : (React__namespace.createElement(React__namespace.Fragment, { key: idx }));\n        })))));\n};\n\nvar getFileExt = function (url) {\n    var str = url.split(/\\./).pop();\n    return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\nvar calculateScale = function (container, pageHeight, pageWidth, scale) {\n    switch (scale) {\n        case SpecialZoomLevel$1.ActualSize:\n            return 1;\n        case SpecialZoomLevel$1.PageFit:\n            return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (container.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n        case SpecialZoomLevel$1.PageWidth:\n            return (container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n    }\n};\n\nvar Inner = function (_a) {\n    var doc = _a.doc, initialPage = _a.initialPage, pageSize = _a.pageSize, plugins = _a.plugins, renderPage = _a.renderPage, viewerState = _a.viewerState, onDocumentLoad = _a.onDocumentLoad, onOpenFile = _a.onOpenFile, onPageChange = _a.onPageChange, onZoom = _a.onZoom;\n    var containerRef = React__namespace.useRef(null);\n    var pagesRef = React__namespace.useRef(null);\n    var _b = React__namespace.useState(0), currentPage = _b[0], setCurrentPage = _b[1];\n    var _c = React__namespace.useState(0), rotation = _c[0], setRotation = _c[1];\n    var stateRef = React__namespace.useRef(viewerState);\n    var _d = React__namespace.useState(pageSize.scale), scale = _d[0], setScale = _d[1];\n    var numPages = doc.numPages;\n    var pageWidth = pageSize.pageWidth, pageHeight = pageSize.pageHeight;\n    var arr = Array(numPages).fill(null);\n    var pageVisibility = arr.map(function () { return 0; });\n    var pageRefs = arr.map(function () { return React__namespace.useRef(); });\n    var setViewerState = function (viewerState) {\n        var newState = viewerState;\n        plugins.forEach(function (plugin) {\n            if (plugin.onViewerStateChange) {\n                newState = plugin.onViewerStateChange(newState);\n            }\n        });\n        stateRef.current = newState;\n    };\n    var getPagesContainer = function () { return pagesRef.current; };\n    var getPageElement = function (pageIndex) {\n        if (pageIndex < 0 || pageIndex >= numPages) {\n            return null;\n        }\n        return pageRefs[pageIndex].current;\n    };\n    var getViewerState = function () { return stateRef.current; };\n    var jumpToDestination = function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n        var pagesContainer = pagesRef.current;\n        var currentState = stateRef.current;\n        if (!pagesContainer || !currentState) {\n            return;\n        }\n        var newPageIndex = pageIndex + 1;\n        doc.getPage(newPageIndex).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var top = 0;\n            var bottom = bottomOffset || 0;\n            var left = leftOffset || 0;\n            var updateScale = currentState.scale;\n            switch (scaleTo) {\n                case SpecialZoomLevel$1.PageFit:\n                    top = 0;\n                    left = 0;\n                    zoom(SpecialZoomLevel$1.PageFit);\n                    break;\n                case SpecialZoomLevel$1.PageWidth:\n                    updateScale = calculateScale(pagesContainer, pageHeight, pageWidth, SpecialZoomLevel$1.PageWidth);\n                    top = (viewport.height - bottom) * updateScale;\n                    left = left * updateScale;\n                    zoom(updateScale);\n                    break;\n                default:\n                    top = (viewport.height - bottom) * currentState.scale;\n                    left = left * currentState.scale;\n                    break;\n            }\n            var targetPageEle = pageRefs[pageIndex].current;\n            if (targetPageEle) {\n                pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n                pagesContainer.scrollLeft = targetPageEle.offsetLeft + left;\n            }\n        });\n    };\n    var jumpToPage = function (pageIndex) {\n        if (pageIndex < 0 || pageIndex >= numPages) {\n            return;\n        }\n        var pagesContainer = pagesRef.current;\n        var targetPage = pageRefs[pageIndex].current;\n        if (pagesContainer && targetPage) {\n            pagesContainer.scrollTop = targetPage.offsetTop;\n            pagesContainer.scrollLeft = targetPage.offsetLeft;\n        }\n        setCurrentPage(pageIndex);\n    };\n    var openFile = function (file) {\n        if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n            return;\n        }\n        new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.readAsArrayBuffer(file);\n            reader.onload = function () {\n                var bytes = new Uint8Array(reader.result);\n                resolve(bytes);\n            };\n        }).then(function (data) {\n            onOpenFile(file.name, data);\n        });\n    };\n    var rotate = function (updateRotation) {\n        setRotation(updateRotation);\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentPage,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: updateRotation,\n            scale: scale,\n        });\n    };\n    var zoom = function (newScale) {\n        var pagesEle = pagesRef.current;\n        var updateScale = pagesEle\n            ? typeof newScale === 'string'\n                ? calculateScale(pagesEle, pageHeight, pageWidth, newScale)\n                : newScale\n            : 1;\n        setScale(updateScale);\n        onZoom({ doc: doc, scale: updateScale });\n    };\n    React__namespace.useEffect(function () {\n        var pagesEle = pagesRef.current;\n        var currentState = stateRef.current;\n        if (!pagesEle || !currentState) {\n            return;\n        }\n        pagesEle.scrollTop = (pagesEle.scrollTop * scale) / currentState.scale;\n        pagesEle.scrollLeft = (pagesEle.scrollLeft * scale) / currentState.scale;\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentState.pageIndex,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: rotation,\n            scale: scale,\n        });\n    }, [scale]);\n    var getPluginMethods = function () { return ({\n        getPageElement: getPageElement,\n        getPagesContainer: getPagesContainer,\n        getViewerState: getViewerState,\n        jumpToDestination: jumpToDestination,\n        jumpToPage: jumpToPage,\n        openFile: openFile,\n        rotate: rotate,\n        setViewerState: setViewerState,\n        zoom: zoom,\n    }); };\n    React__namespace.useEffect(function () {\n        var pluginMethods = getPluginMethods();\n        plugins.forEach(function (plugin) {\n            if (plugin.install) {\n                plugin.install(pluginMethods);\n            }\n        });\n        return function () {\n            plugins.forEach(function (plugin) {\n                if (plugin.uninstall) {\n                    plugin.uninstall(pluginMethods);\n                }\n            });\n        };\n    }, []);\n    React__namespace.useEffect(function () {\n        onDocumentLoad({ doc: doc });\n        plugins.forEach(function (plugin) {\n            plugin.onDocumentLoad && plugin.onDocumentLoad({ doc: doc });\n        });\n        if (initialPage) {\n            jumpToPage(initialPage);\n        }\n    }, []);\n    React__namespace.useEffect(function () {\n        onPageChange({ currentPage: currentPage, doc: doc });\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentPage,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: rotation,\n            scale: scale,\n        });\n    }, [currentPage]);\n    var pageVisibilityChanged = function (pageIndex, ratio) {\n        pageVisibility[pageIndex] = ratio;\n        var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n            return item > array[maxIndex] ? index : maxIndex;\n        }, 0);\n        setCurrentPage(maxRatioPage);\n    };\n    var executeNamedAction = function (action) {\n        var previousPage = currentPage - 1;\n        var nextPage = currentPage + 1;\n        switch (action) {\n            case 'FirstPage':\n                jumpToPage(0);\n                break;\n            case 'LastPage':\n                jumpToPage(numPages - 1);\n                break;\n            case 'NextPage':\n                nextPage < numPages && jumpToPage(nextPage);\n                break;\n            case 'PrevPage':\n                previousPage >= 0 && jumpToPage(previousPage);\n                break;\n        }\n    };\n    var renderViewer = function () {\n        var slot = {\n            attrs: {\n                ref: containerRef,\n                style: {\n                    height: '100%',\n                },\n            },\n            children: React__namespace.createElement(React__namespace.Fragment, null),\n            subSlot: {\n                attrs: {\n                    ref: pagesRef,\n                    style: {\n                        height: '100%',\n                        overflow: 'auto',\n                        position: 'relative',\n                    },\n                },\n                children: (React__namespace.createElement(React__namespace.Fragment, null, Array(numPages)\n                    .fill(0)\n                    .map(function (_, index) {\n                    return (React__namespace.createElement(\"div\", { className: \"rpv-core__inner-page\", key: \"pagelayer-\" + index, ref: function (ref) {\n                            pageRefs[index].current = ref;\n                        } },\n                        React__namespace.createElement(PageLayer, { currentPage: currentPage, doc: doc, height: pageHeight, pageIndex: index, plugins: plugins, renderPage: renderPage, rotation: rotation, scale: scale, width: pageWidth, onExecuteNamedAction: executeNamedAction, onJumpToDest: jumpToDestination, onPageVisibilityChanged: pageVisibilityChanged })));\n                }))),\n            },\n        };\n        plugins.forEach(function (plugin) {\n            if (plugin.renderViewer) {\n                slot = plugin.renderViewer({\n                    containerRef: containerRef,\n                    doc: doc,\n                    pageHeight: pageHeight,\n                    pageWidth: pageWidth,\n                    rotation: rotation,\n                    slot: slot,\n                    jumpToPage: jumpToPage,\n                    openFile: openFile,\n                    rotate: rotate,\n                    zoom: zoom,\n                });\n            }\n        });\n        return slot;\n    };\n    var renderSlot = function (slot) { return (React__namespace.createElement(\"div\", __assign({}, slot.attrs, { style: slot.attrs && slot.attrs.style ? slot.attrs.style : {} }),\n        slot.children,\n        slot.subSlot && renderSlot(slot.subSlot))); };\n    return renderSlot(renderViewer());\n};\n\nvar LEVELS = [\n    0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6,\n    5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10,\n];\nvar decrease = function (currentLevel) {\n    var found = LEVELS.findIndex(function (item) { return item >= currentLevel; });\n    return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar PageSizeCalculator = function (_a) {\n    var defaultScale = _a.defaultScale, doc = _a.doc, render = _a.render;\n    var pagesRef = React__namespace.useRef(null);\n    var _b = React__namespace.useState({\n        pageHeight: 0,\n        pageWidth: 0,\n        scale: 1,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    React__namespace.useEffect(function () {\n        doc.getPage(1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            var w = viewport.width;\n            var h = viewport.height;\n            var pagesEle = pagesRef.current;\n            if (!pagesEle) {\n                return;\n            }\n            var scaled = (pagesEle.clientWidth - 2 * 50) / w;\n            var scale = defaultScale\n                ? typeof defaultScale === 'string'\n                    ? calculateScale(pagesEle, h, w, defaultScale)\n                    : defaultScale\n                : decrease(scaled);\n            setPageSize({\n                pageHeight: h,\n                pageWidth: w,\n                scale: scale,\n            });\n        });\n    }, [doc]);\n    var pageWidth = pageSize.pageWidth;\n    return pageWidth === 0 ? (React__namespace.createElement(\"div\", { className: \"rpv-core__page-size-calculator\", ref: pagesRef },\n        React__namespace.createElement(Spinner, null))) : (render(pageSize));\n};\n\nvar useIsMounted = function () {\n    var isMountedRef = React__namespace.useRef(false);\n    React__namespace.useEffect(function () {\n        isMountedRef.current = true;\n        return function () {\n            isMountedRef.current = false;\n        };\n    }, []);\n    return isMountedRef;\n};\n\nvar LoadingStatus = (function () {\n    function LoadingStatus() {\n    }\n    return LoadingStatus;\n}());\n\nvar AskForPasswordState = (function (_super) {\n    __extends(AskForPasswordState, _super);\n    function AskForPasswordState(verifyPasswordFn) {\n        var _this = _super.call(this) || this;\n        _this.verifyPasswordFn = verifyPasswordFn;\n        return _this;\n    }\n    return AskForPasswordState;\n}(LoadingStatus));\n\nvar AskingPassword = function (_a) {\n    var verifyPasswordFn = _a.verifyPasswordFn;\n    var l10n = React__namespace.useContext(LocalizationContext);\n    var _b = React__namespace.useState(''), password = _b[0], setPassword = _b[1];\n    var submit = function () { return verifyPasswordFn(password); };\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-wrapper\" },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password\" },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-message\" },\n                l10n.core.askingPassword.requirePasswordToOpen,\n                \":\"),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-body\" },\n                React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-input\" },\n                    React__namespace.createElement(TextBox, { type: \"password\", value: password, onChange: setPassword })),\n                React__namespace.createElement(PrimaryButton, { onClick: submit }, l10n.core.askingPassword.submit)))));\n};\n\nvar CompletedState = (function (_super) {\n    __extends(CompletedState, _super);\n    function CompletedState(doc) {\n        var _this = _super.call(this) || this;\n        _this.doc = doc;\n        return _this;\n    }\n    return CompletedState;\n}(LoadingStatus));\n\nvar FailureState = (function (_super) {\n    __extends(FailureState, _super);\n    function FailureState(error) {\n        var _this = _super.call(this) || this;\n        _this.error = error;\n        return _this;\n    }\n    return FailureState;\n}(LoadingStatus));\n\nvar LoadingState = (function (_super) {\n    __extends(LoadingState, _super);\n    function LoadingState(percentages) {\n        var _this = _super.call(this) || this;\n        _this.percentages = percentages;\n        return _this;\n    }\n    return LoadingState;\n}(LoadingStatus));\n\nvar WrongPassword = function (_a) {\n    var verifyPasswordFn = _a.verifyPasswordFn;\n    var l10n = React__namespace.useContext(LocalizationContext);\n    var _b = React__namespace.useState(''), password = _b[0], setPassword = _b[1];\n    var submit = function () { return verifyPasswordFn(password); };\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-wrapper\" },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password\" },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-message\" },\n                l10n.core.wrongPassword.tryAgain,\n                \":\"),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-body\" },\n                React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-input\" },\n                    React__namespace.createElement(TextBox, { type: \"password\", value: password, onChange: setPassword })),\n                React__namespace.createElement(\"button\", { className: \"rpv-core__asking-password-button\", onClick: submit }, l10n.core.wrongPassword.submit)))));\n};\n\nvar WrongPasswordState = (function (_super) {\n    __extends(WrongPasswordState, _super);\n    function WrongPasswordState(verifyPasswordFn) {\n        var _this = _super.call(this) || this;\n        _this.verifyPasswordFn = verifyPasswordFn;\n        return _this;\n    }\n    return WrongPasswordState;\n}(LoadingStatus));\n\nvar DocumentLoader = function (_a) {\n    var characterMap = _a.characterMap, file = _a.file, httpHeaders = _a.httpHeaders, render = _a.render, renderError = _a.renderError, renderLoader = _a.renderLoader, transformGetDocumentParams = _a.transformGetDocumentParams, withCredentials = _a.withCredentials;\n    var _b = React__namespace.useState(new LoadingState(0)), status = _b[0], setStatus = _b[1];\n    var _c = React__namespace.useState(0), percentages = _c[0], setPercentages = _c[1];\n    var _d = React__namespace.useState(null), loadedDocument = _d[0], setLoadedDocument = _d[1];\n    var isMounted = useIsMounted();\n    React__namespace.useEffect(function () {\n        setStatus(new LoadingState(0));\n        var worker = new PdfJs__namespace.PDFWorker({ name: \"PDFWorker_\" + Date.now() });\n        var params = Object.assign({\n            httpHeaders: httpHeaders,\n            withCredentials: withCredentials,\n            worker: worker,\n        }, 'string' === typeof file ? { url: file } : { data: file }, characterMap\n            ? {\n                cMapUrl: characterMap.url,\n                cMapPacked: characterMap.isCompressed,\n            }\n            : {});\n        var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n        var loadingTask = PdfJs__namespace.getDocument(transformParams);\n        loadingTask.onPassword = function (verifyPassword, reason) {\n            switch (reason) {\n                case PdfJs__namespace.PasswordResponses.NEED_PASSWORD:\n                    isMounted.current && setStatus(new AskForPasswordState(verifyPassword));\n                    break;\n                case PdfJs__namespace.PasswordResponses.INCORRECT_PASSWORD:\n                    isMounted.current && setStatus(new WrongPasswordState(verifyPassword));\n                    break;\n            }\n        };\n        loadingTask.onProgress = function (progress) {\n            progress.total > 0\n                ?\n                    isMounted.current && setPercentages(Math.min(100, (100 * progress.loaded) / progress.total))\n                : isMounted.current && setPercentages(100);\n        };\n        loadingTask.promise.then(function (doc) { return isMounted.current && setLoadedDocument(doc); }, function (err) {\n            return isMounted.current &&\n                !worker.destroyed &&\n                setStatus(new FailureState({\n                    message: err.message || 'Cannot load document',\n                    name: err.name,\n                }));\n        });\n        return function () {\n            loadingTask.destroy();\n            worker.destroy();\n        };\n    }, [file]);\n    React__namespace.useEffect(function () {\n        percentages === 100 && loadedDocument\n            ? isMounted.current && setStatus(new CompletedState(loadedDocument))\n            : isMounted.current && setStatus(new LoadingState(percentages));\n    }, [percentages, loadedDocument]);\n    switch (true) {\n        case status instanceof AskForPasswordState:\n            return React__namespace.createElement(AskingPassword, { verifyPasswordFn: status.verifyPasswordFn });\n        case status instanceof WrongPasswordState:\n            return React__namespace.createElement(WrongPassword, { verifyPasswordFn: status.verifyPasswordFn });\n        case status instanceof CompletedState:\n            return render(status.doc);\n        case status instanceof FailureState:\n            return renderError ? (renderError(status.error)) : (React__namespace.createElement(\"div\", { className: \"rpv-core__doc-error\" },\n                React__namespace.createElement(\"div\", { className: \"rpv-core__doc-error-text\" }, status.error.message)));\n        case status instanceof LoadingState:\n            return (React__namespace.createElement(\"div\", { className: \"rpv-core__doc-loading\" }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null)));\n        default:\n            return (React__namespace.createElement(\"div\", { className: \"rpv-core__doc-loading\" },\n                React__namespace.createElement(Spinner, null)));\n    }\n};\n\nvar isSameUrl = function (a, b) {\n    var typeA = typeof a;\n    var typeB = typeof b;\n    if (typeA === 'string' && typeB === 'string' && a === b) {\n        return true;\n    }\n    if (typeA === 'object' && typeB === 'object') {\n        return a.length === b.length && a.every(function (v, i) { return v === b[i]; });\n    }\n    return false;\n};\n\nvar Viewer = function (_a) {\n    var characterMap = _a.characterMap, defaultScale = _a.defaultScale, fileUrl = _a.fileUrl, _b = _a.httpHeaders, httpHeaders = _b === void 0 ? {} : _b, _c = _a.initialPage, initialPage = _c === void 0 ? 0 : _c, localization = _a.localization, _d = _a.plugins, plugins = _d === void 0 ? [] : _d, renderError = _a.renderError, renderPage = _a.renderPage, renderLoader = _a.renderLoader, transformGetDocumentParams = _a.transformGetDocumentParams, _e = _a.theme, theme = _e === void 0 ? 'light' : _e, _f = _a.withCredentials, withCredentials = _f === void 0 ? false : _f, _g = _a.onDocumentLoad, onDocumentLoad = _g === void 0 ? function () {\n    } : _g, _h = _a.onPageChange, onPageChange = _h === void 0 ? function () {\n    } : _h, _j = _a.onZoom, onZoom = _j === void 0 ? function () {\n    } : _j;\n    var _k = React__namespace.useState({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: false,\n    }), file = _k[0], setFile = _k[1];\n    var openFile = function (fileName, data) {\n        setFile({\n            data: data,\n            name: fileName,\n            shouldLoad: true,\n        });\n    };\n    var _l = React__namespace.useState(false), visible = _l[0], setVisible = _l[1];\n    var prevFile = usePrevious(file);\n    React__namespace.useEffect(function () {\n        if (!isSameUrl(prevFile.data, fileUrl)) {\n            setFile({\n                data: fileUrl,\n                name: typeof fileUrl === 'string' ? fileUrl : '',\n                shouldLoad: visible,\n            });\n        }\n    }, [fileUrl, visible]);\n    var visibilityChanged = function (params) {\n        setVisible(params.isVisible);\n        if (params.isVisible) {\n            setFile(function (currentFile) { return Object.assign({}, currentFile, { shouldLoad: true }); });\n        }\n    };\n    var containerRef = useIntersectionObserver({\n        onVisibilityChanged: visibilityChanged,\n    });\n    return (React__namespace.createElement(ThemeProvider, { theme: theme },\n        React__namespace.createElement(LocalizationProvider, { localization: localization }, function (_) {\n            var themeContext = React__namespace.useContext(ThemeContext);\n            return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__viewer rpv-core__viewer--\" + themeContext.currentTheme, \"data-testid\": \"viewer\", style: {\n                    height: '100%',\n                    width: '100%',\n                } }, file.shouldLoad && (React__namespace.createElement(DocumentLoader, { characterMap: characterMap, file: file.data, httpHeaders: httpHeaders, render: function (doc) { return (React__namespace.createElement(PageSizeCalculator, { defaultScale: defaultScale, doc: doc, render: function (ps) { return (React__namespace.createElement(Inner, { doc: doc, initialPage: initialPage, pageSize: ps, plugins: plugins, renderPage: renderPage, viewerState: {\n                            file: file,\n                            pageIndex: initialPage,\n                            pageHeight: ps.pageHeight,\n                            pageWidth: ps.pageWidth,\n                            rotation: 0,\n                            scale: ps.scale,\n                        }, onDocumentLoad: onDocumentLoad, onOpenFile: openFile, onPageChange: onPageChange, onZoom: onZoom })); } })); }, renderError: renderError, renderLoader: renderLoader, transformGetDocumentParams: transformGetDocumentParams, withCredentials: withCredentials }))));\n        })));\n};\n\nvar Worker = function (_a) {\n    var children = _a.children, workerUrl = _a.workerUrl;\n    PdfJs__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n    return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nexports.AnnotationType = AnnotationType$1;\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LayerRenderStatus = LayerRenderStatus$1;\nexports.LocalizationContext = LocalizationContext;\nexports.LocalizationProvider = LocalizationProvider;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.Position = Position$1;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.SpecialZoomLevel = SpecialZoomLevel$1;\nexports.Spinner = Spinner;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.ThemeProvider = ThemeProvider;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\n"]},"metadata":{},"sourceType":"script"}