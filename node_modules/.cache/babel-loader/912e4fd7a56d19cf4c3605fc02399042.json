{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n['default'] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar fileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', fileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar AttachmentList = function (_a) {\n  var files = _a.files;\n  var l10n = React__namespace.useContext(core.LocalizationContext);\n\n  var renderItem = function (file) {\n    var onClick = function () {\n      return downloadFile(file.fileName, file.data);\n    };\n\n    return React__namespace.createElement(\"li\", {\n      className: \"rpv-attachment__item\",\n      key: \"attachment-\" + file.fileName,\n      title: l10n && l10n.attachment ? l10n.attachment.clickToDownload : 'Click to download',\n      onClick: onClick\n    }, file.fileName);\n  };\n\n  return files.length === 0 ? React__namespace.createElement(\"div\", {\n    className: \"rpv-attachment__empty\"\n  }, l10n && l10n.attachment ? l10n.attachment.noAttachment : 'There is no attachment') : React__namespace.createElement(\"ul\", {\n    className: \"rpv-attachment__list\"\n  }, files.map(renderItem));\n};\n\nvar AttachmentLoader = function (_a) {\n  var doc = _a.doc;\n\n  var _b = React__namespace.useState({\n    files: [],\n    isLoaded: false\n  }),\n      attachments = _b[0],\n      setAttachments = _b[1];\n\n  React__namespace.useEffect(function () {\n    doc.getAttachments().then(function (response) {\n      var files = response ? Object.keys(response).map(function (file) {\n        return {\n          data: response[file].content,\n          fileName: response[file].filename\n        };\n      }) : [];\n      setAttachments({\n        files: files,\n        isLoaded: true\n      });\n    });\n  }, [doc]);\n  return !attachments.isLoaded ? React__namespace.createElement(core.Spinner, null) : React__namespace.createElement(AttachmentList, {\n    files: attachments.files\n  });\n};\n\nvar AttachmentListWithStore = function (_a) {\n  var store = _a.store;\n\n  var _b = React__namespace.useState(store.get('doc')),\n      currentDoc = _b[0],\n      setCurrentDoc = _b[1];\n\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return currentDoc ? React__namespace.createElement(AttachmentLoader, {\n    doc: currentDoc\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-attachment__loader\"\n  }, React__namespace.createElement(core.Spinner, null));\n};\n\nvar attachmentPlugin = function () {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({});\n  }, []);\n\n  var AttachmentsDecorator = function () {\n    return React__namespace.createElement(AttachmentListWithStore, {\n      store: store\n    });\n  };\n\n  return {\n    onDocumentLoad: function (props) {\n      store.update('doc', props.doc);\n    },\n    Attachments: AttachmentsDecorator\n  };\n};\n\nexports.attachmentPlugin = attachmentPlugin;","map":{"version":3,"sources":["/Users/kzjouf/Desktop/project/sc-dapp/node_modules/@react-pdf-viewer/attachment/lib/cjs/attachment.js"],"names":["Object","defineProperty","exports","value","React","require","core","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","fileName","url","str","split","pop","downloadFile","data","blobUrl","URL","createObjectURL","Blob","type","link","document","createElement","style","display","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","AttachmentList","_a","files","l10n","useContext","LocalizationContext","renderItem","file","onClick","className","key","title","attachment","clickToDownload","length","noAttachment","map","AttachmentLoader","doc","_b","useState","isLoaded","attachments","setAttachments","useEffect","getAttachments","then","response","content","filename","Spinner","AttachmentListWithStore","store","currentDoc","setCurrentDoc","handleDocumentChanged","subscribe","unsubscribe","attachmentPlugin","useMemo","createStore","AttachmentsDecorator","onDocumentLoad","props","update","Attachments"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () {\n                        return e[k];\n                    }\n                });\n            }\n        });\n    }\n    n['default'] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar fileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', fileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar AttachmentList = function (_a) {\n    var files = _a.files;\n    var l10n = React__namespace.useContext(core.LocalizationContext);\n    var renderItem = function (file) {\n        var onClick = function () { return downloadFile(file.fileName, file.data); };\n        return (React__namespace.createElement(\"li\", { className: \"rpv-attachment__item\", key: \"attachment-\" + file.fileName, title: (l10n && l10n.attachment ? l10n.attachment.clickToDownload : 'Click to download'), onClick: onClick }, file.fileName));\n    };\n    return files.length === 0 ? (React__namespace.createElement(\"div\", { className: \"rpv-attachment__empty\" }, l10n && l10n.attachment ? l10n.attachment.noAttachment : 'There is no attachment')) : (React__namespace.createElement(\"ul\", { className: \"rpv-attachment__list\" }, files.map(renderItem)));\n};\n\nvar AttachmentLoader = function (_a) {\n    var doc = _a.doc;\n    var _b = React__namespace.useState({\n        files: [],\n        isLoaded: false,\n    }), attachments = _b[0], setAttachments = _b[1];\n    React__namespace.useEffect(function () {\n        doc.getAttachments().then(function (response) {\n            var files = response\n                ? Object.keys(response).map(function (file) {\n                    return {\n                        data: response[file].content,\n                        fileName: response[file].filename,\n                    };\n                })\n                : [];\n            setAttachments({\n                files: files,\n                isLoaded: true,\n            });\n        });\n    }, [doc]);\n    return !attachments.isLoaded ? React__namespace.createElement(core.Spinner, null) : React__namespace.createElement(AttachmentList, { files: attachments.files });\n};\n\nvar AttachmentListWithStore = function (_a) {\n    var store = _a.store;\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return currentDoc ? (React__namespace.createElement(AttachmentLoader, { doc: currentDoc })) : (React__namespace.createElement(\"div\", { className: \"rpv-attachment__loader\" },\n        React__namespace.createElement(core.Spinner, null)));\n};\n\nvar attachmentPlugin = function () {\n    var store = React__namespace.useMemo(function () { return core.createStore({}); }, []);\n    var AttachmentsDecorator = function () { return React__namespace.createElement(AttachmentListWithStore, { store: store }); };\n    return {\n        onDocumentLoad: function (props) {\n            store.update('doc', props.doc);\n        },\n        Attachments: AttachmentsDecorator,\n    };\n};\n\nexports.attachmentPlugin = attachmentPlugin;\n"]},"metadata":{},"sourceType":"script"}